<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>flowChart</title>
    <!-- <link rel="stylesheet" type="text/css" href="css/style.css" /> -->
	<link type="text/css" href="semantic-ui-2.2.13/dist/semantic.min.css" rel="stylesheet">
	<link type="text/css" href="css/graph-creator.css" rel="stylesheet" />
	<link type="text/css" href="css/jquery.mCustomScrollbar.css" rel="stylesheet">
	<link type="text/css" href="ztree/css/metroStyle/metroStyle.css" rel="stylesheet">
	<link type="text/css" rel="stylesheet" href="laypage/skin/laypage.css" />
	<link type="text/css" href="css/flowchart.css" rel="stylesheet"/>
</head>
<body>
	<div class="subheader editor-toolbar">
		<div class="column pop-btn" data-content="保存" data-position="bottom center" data-variation="mini"><i class="save icon"></i></div>
		<div class="divider"></div>
		<div class="column pop-btn" data-content="剪切" data-position="bottom center" data-variation="mini"><i class="cut icon"></i></div>
		<div class="column pop-btn" data-content="复制" data-position="bottom center" data-variation="mini"><i class="copy icon"></i></div>
		<div class="column pop-btn" data-content="粘贴" data-position="bottom center" data-variation="mini"><i class="paste icon"></i></div>
		<div class="column pop-btn" id="delete-graph" data-content="清空" data-position="bottom center" data-variation="mini"><i class="trash icon"></i></div>
		<div class="column pop-btn" id="delete-ele" data-content="删除" data-position="bottom center" data-variation="mini"><i class="remove icon"></i></div>
		<div class="divider"></div>
		<div class="column pop-btn" data-content="撤销" data-position="bottom center" data-variation="mini"><i class="repeat icon"></i></div>
		<div class="column pop-btn" data-content="恢复" data-position="bottom center" data-variation="mini"><i class="undo icon"></i></div>
		<div class="divider"></div>
		<div class="column pop-btn" id="zoom-enlarge" data-content="放大" data-position="bottom center" data-variation="mini"><i class="zoom icon"></i></div>
		<div class="column pop-btn" id="zoom-narrow" data-content="缩小" data-position="bottom center" data-variation="mini"><i class="zoom out icon"></i></div>
		<div class="column pop-btn" id="reset-zoom" data-content="归位" data-position="bottom center" data-variation="mini"><i class="maximize icon"></i></div>
		<div class="divider"></div>
		<div class="column pop-btn" data-content="导入json" data-position="bottom center" data-variation="mini"><i class="sign in icon"></i></div>
		<div class="column pop-btn small popup" data-content="导出json" data-position="bottom center" data-variation="mini"><i class="sign out icon"></i></div>
		<div class="divider"></div>
		<div class="column pop-btn" id="helper" data-content="将左侧活动拖至编辑区" data-position="bottom center" data-variation="mini"><i class="help circle outline icon"></i></div>
	</div>
	<div class="full clearfix">
		<div id="flowComponents" class="full-left">
			<div class="components-btn noComponent selectBtn clearfix" name="selectBtn">
				<div><img src="icons/activity/select.png" draggable="false"><span>选择</span></div>
			</div>
			<div class="components-btn clearfix" name="startComponent" type="start" for-name="circle">
				<div><img id="img" src="icons/startevent/none.png"/><span>开始</span></div>
			</div>
			<div class="components-btn clearfix" name="endComponent" type="end" for-name="circle">
				<div><img src="icons/endevent/none.png"><span>结束</span></div>
			</div>
			<div class="components-btn clearfix" name="activityComponent" type="activity" for-name="rect">
				<div><img src="icons/activity/list/type.user.png"><span>普通活动</span></div>
			</div>
			<div class="components-btn clearfix" name="blockActivity" type="activity" for-name="">
				<div><img src="icons/activity/task.png"><span>块活动</span></div>
			</div>
			<div class="components-btn clearfix" name="subFlowActivity" type="activity" for-name="">
				<div><img src="icons/activity/event.subprocess.png"><span>子活动</span></div>
			</div>
			<div class="components-btn clearfix" name="routeActivity" type="activity" for-name="">
				<div><img src="icons/activity/list/type.receive.png"><span>路径活动</span></div>
			</div>
			<div class="components-btn noComponent clearfix" name="NOROUTING" for-name="line">
				<div><img src="icons/connector/sequenceflow.png" draggable="false"><span>转移</span></div>
			</div>
			<div class="components-btn noComponent clearfix" name="SIMPLEROUTING" for-name="line">
				<div><img src="icons/connector/messageflow.png" draggable="false"><span>自转移</span></div>
			</div>
		</div>
		<div class="full-right tab clearfix">
			<div class="ui top attached tabular mini menu">
			  	<a class="item active" data-tab="tab_first">
			  		<i class="remove red icon"></i>过程
			  	</a>
			  	<a class="item" data-tab="tab_second">
			  		<i class="remove red icon"></i>块活动
			  	</a>
			</div>
			<div class="ui bottom attached tab active" data-tab="tab_first">
			  	<form id="containerForm" method="post" action="platform/wfdman/insert.do">
					<div id="container" class="ui top attached tab active full-right-top view" data-tab="first">
						<!-- svg -->
					</div>
					<div id="xpdlContainer" class="ui top attached tab view content-div" data-tab="second">
						<xmp>
							<!-- xpdl -->
						</xmp>
					</div>
					<div id="xmlContainer" class="ui top attached tab view content-div" data-tab="third">
						<xmp>
							<!-- xml -->
						</xmp>
					</div>
					<div class="full-right-btn ui bottom attached tabular mini menu">
						<a class="item active" data-tab="first">图标视图</a>
						<a class="item" data-tab="second">xpdl视图</a>
						<a class="item" data-tab="third">xml视图</a>
					</div>
					<div id="propertiesWrapper" class="full-right-bottom">
						<div class="component-name"><i class="angle double down icon"></i><span></span></div>
						<div class="component-prop content-div">
							<!-- activity属性 -->
						</div>
					</div>

					<input name="xpdlcontent" type="hidden" value="">
					<input name="xmlcontent" type="hidden" value="">

					<input type="hidden" id="wFID" name="wFID" value="">
					<input type="hidden" id="wFType" name="wFType" value="money">
					<input type="hidden" id="subType" name="subType" value="">
					<input type="hidden" id="depart" name="depart" value="">
					<input type="hidden" id="departID" name="departID" value="">
					<input type="hidden" id="formName" name="formName" value="">
					<input type="hidden" id="formId" name="formId" value="">
					<input type="hidden" id="formType" name="formType" value="wfd_form">
					<input type="hidden" id="mode" name="mode" value="">
					<input type="hidden" id="dt" name="dt" onFocus="WdatePicker({dateFmt:'dd HH:mm',skin:'blue'});" value="">
					<input type="hidden" id="dataObjectID" name="dataObjectID" value="">
					<input type="hidden" id="securityID" name="securityID" value="">
					<input type="hidden" id="securityName" name="securityName" value="">
					<input type="hidden" id="orderNo" name="orderNo" value="">
				</form>
			</div>
			<div class="ui bottom attached tab segment" data-tab="tab_second">
			  	块活动页面
			</div>
			
		</div>
	</div>
	<!-- 导入导出弹出层 -->
	<div class="ui segment small modal json_data">
	  	<i class="close icon"></i>
	  	<div class="header">
	   		导入数据
	  	</div>
	  	<div class="content">
	    	<textarea></textarea>
	  	</div>
	  	<div class="actions">
	      	<div class="ui negative button">No </div>
	      	<div class="ui positive right labeled icon button">Yes <i class="checkmark icon"></i> </div>
	    </div>
	</div>
	<!-- 右键菜单 -->
	<div id="rMenu" class="ui vertical mini menu">
		<a class="item" name="removeMenu">删除<i class="remove icon"></i></a>
		<a class="item" name="propMenu">属性<i class="book icon"></i></a>
		<a class="item" name="toFront">置前<i class="object ungroup icon"></i></a>
	</div>
	<!-- 属性弹出层 start -->
	<div class="ui coupled modal prop_node">
		<i class="close icon"></i>
	  	<div class="ui pointing secondary menu">
		  <a class="item active" data-tab="one">常规</a>
		  <a class="item" data-tab="two_1">工具</a>
		  <a class="item hideitem" data-tab="two_2">块活动</a>
		  <a class="item hideitem" data-tab="two_3">子工作流</a>
		  <a class="item" data-tab="three">前置条件</a>
		  <a class="item" data-tab="four">后置条件</a>
		  <a class="item" data-tab="five">扩展属性集</a>
		  <a class="item" data-tab="six">超时限制</a>
		  <a class="item" data-tab="seven">高级</a>
		  <a class="item" data-tab="eight">监控信息</a>
		</div>
		<!-- 常规item start -->
		<div class="ui tab segment active" data-tab="one">
			<div class="ui mini form conventional">
				<div class="fields">
				    <div class="five wide field">
				      <label>ID:</label>
				      <input name="ID" type="text" placeholder="ID">
				    </div>
				    <div class="five wide field">
				      <label>名称:</label>
				      <input name="name" type="text" placeholder="名称">
				    </div>
				    <div class="five wide field">
					    <label>类型:</label>
					    <input name="type" type="text" placeholder="类型" readonly>
					</div>
				</div>
				<div class="ui divider hidden"></div>
				<div class="field">
    				<label>参与者集:</label>
					<div class="two fields">
						<div class="five wide field definition_field">
                		  	<select class="ui search dropdown" name="definition_role">
      							<option value="">请选择</option>
      							<option value="0">(空)</option>
							</select>      					
                		</div>
                		<div class="five wide field">
							<button class="ui facebook mini button definitionBtn"><i class="write icon"></i>定义</button>
                		</div>
                	</div>
                </div>
                <div class="fields">
                	<div class="inline field">
    				  	<div class="ui checkbox isTracking">
    				  	  	<input type="checkbox" tabindex="0" class="hidden">
    				  	  	<label>是否全程跟踪</label>
    				  	  	<input type="hidden" name="isResponsible" value="">
    				  	</div>
    				</div>
    				<div class="inline field">
    				  	<div class="ui checkbox isReceiveTask">
    				  	  	<input type="checkbox" tabindex="0" class="hidden">
    				  	  	<label>是否自动接收任务委派</label>
    				  	  	<input type="hidden" name="autoAcceptAllAssignments" value="">
    				  	</div>
    				</div>
				</div>
				<div class="ui divider hidden"></div>
				<div class="fields">
					<div class="five wide field">
					    <label>开始模式:</label>
					    <select name="startMode" class="ui search dropdown">
					    	<option value="">开始模式</option>
					      	<option value="manual">手动</option>
					      	<option value="automatic">自动</option>
					    </select>
					</div>
					<div class="five wide field">
					    <label>完成模式:</label>
					    <select name="finishMode" class="ui search dropdown">
					    	<option value="">完成模式</option>
					      	<option value="manual">手动</option>
					      	<option value="automatic">自动</option>
					    </select>
					</div>
				    <div class="five wide field">
				      	<label>优先级:</label>
				      	<input name="priority" type="text" placeholder="名称">
				    </div>
				</div>
				<div class="fields">
                	<div class="inline field">
    				  	<div class="ui checkbox completeAllAssignmentsDiv">
    				  	  	<input type="checkbox" tabindex="0" class="hidden">
    				  	  	<label>是否多人处理</label>
    				  	  	<input type="hidden" name="completeAllAssignments" value="">
    				  	</div>
    				</div>
    				<div class="inline field">
    				  	<div class="ui checkbox assignmentsOrderDiv">
    				  	  	<input type="checkbox" tabindex="0" class="hidden">
    				  	  	<label>多人处理是否顺序执行</label>
    				  	  	<input type="hidden" name="assignmentsOrder" value="">
    				  	</div>
    				</div>
    				<div class="inline field">
    				  	<div class="ui checkbox">
    				  	  	<input type="checkbox" tabindex="0" class="hidden">
    				  	  	<label>按参与者生成环节实例</label>
    				  	  	<input type="hidden" name="isMulInstance" value="">
    				  	</div>
    				</div>
				</div>
				<div class="field">
    			  	<label>描述：</label>
    			  	<textarea name="description" rows="2"></textarea>
    			</div>
    			<div class="fields">
					<div class="five wide field">
					    <label>任务委派规则:</label>
					    <select name="taskAssignMode" class="ui search dropdown">
					    	<option value="">任务委派规则</option>
					      	<option value="taskAutoMode">自动</option>
					      	<option value="taskOrgConvertMode">部门默认</option>
					      	<option value="taskRandomMode">随机</option>
					    </select>
					</div>
					<div class="five wide field">
					    <label>必须结束环节:</label>
					    <select name="mustActivity" class="ui search dropdown">
					    	<option value="">必须结束环节</option>
					      	<option value="true">是</option>
					      	<option value="false">否</option>
					    </select>
					</div>
				</div>
			</div>
		</div><!-- 常规item end -->
		<!-- 活动属性-工具item start -->
		<div class="ui tab segment" data-tab="two_1">
			<div class="ui mini form grid toolgrid">
			  	<div class="computer only row">
			  		<div class="twelve wide tablet computer column">
			  			<table class="ui blue sortable selectable celled striped compact table">
							<thead>
								<tr>
									<th class="one wide">选择</th>
									<th class="two wide">应用</th>
									<th class="two wide">类型</th>
								</tr>
							</thead>
							<tbody>
								<tr>
									<td>
										<div class="ui radio checkbox">
											<input type="radio" name="s" tabindex="0" class="hidden">
										</div>
									</td>
									<td>1111111</td>
									<td>Aell</td>
								</tr>
								<tr>
									<td>
										<div class="ui radio checkbox">
											<input type="radio" name="s" tabindex="0" class="hidden">
										</div>
									</td>
									<td>2222222</td>
									<td>Bell</td>
								</tr>
								<tr>
									<td>
										<div class="ui radio checkbox">
											<input type="radio" name="s" tabindex="0" class="hidden">
										</div>
									</td>
									<td>3333333</td>
									<td>Cell</td>
								</tr>
							</tbody>
						</table>
			  		</div>
			    	<div class="three wide column">
			    		<div class="ui vertical">
					    	<button class="ui positive basic mini button toolAddBtn"><i class="icon plus"></i> 添 加</button>
							<button class="ui primary basic mini button showDialog"><i class="icon write"></i> 编 辑</button>
							<button class="ui negative basic mini button"><i class="icon remove"></i> 删 除</button>
					  	</div>
			    	</div>
			  	</div>
			</div>
		</div><!-- 活动属性-工具item end -->
		<!-- 活动属性-块活动item start -->
		<div class="ui tab segment" data-tab="two_2">
			<div class="ui mini form">
				<div class="five wide field">
				  	<label>块标识:</label>
				  	<input type="text" placeholder="块标识">
				</div>
			</div>
		</div><!-- 活动属性-块活动item end -->
		<!-- 活动属性-子活动item start -->
		<div class="ui tab segment" data-tab="two_3">
			<div class="ui mini form">
				<div class="fields">
					<div class="five wide field">
					    <label>工作流过程:</label>
					    <select class="ui search dropdown">
					      	<option value="">选择</option>
					      	<option value="1">过程</option>
					    </select>
					</div>
					<div class="five wide field">
					    <label>执行:</label>
					    <select class="ui search dropdown">
					      	<option value="">选择</option>
					      	<option value="0">(空)</option>
					      	<option value="1">同步</option>
					      	<option value="2">异步</option>
					    </select>
					</div>
				</div>
				<div class="ui divider hidden"></div>
				<div class="ui grid toolgrid">
				  	<div class="computer only row">
				  		<div class="twelve wide tablet computer column">
				  			<table class="ui blue sortable selectable celled striped compact table">
								<thead>
									<tr>
										<th class="one wide">选择</th>
										<th class="two wide">应用</th>
										<th class="two wide">类型</th>
									</tr>
								</thead>
								<tbody>
									<tr>
										<td>
											<div class="ui radio checkbox">
												<input type="radio" name="selectAnswer" tabindex="0" class="hidden">
											</div>
										</td>
										<td>1111111</td>
										<td>Aell</td>
									</tr>
									<tr>
										<td>
											<div class="ui radio checkbox">
												<input type="radio" name="selectAnswer" tabindex="0" class="hidden">
											</div>
										</td>
										<td>2222222</td>
										<td>Bell</td>
									</tr>
									<tr>
										<td>
											<div class="ui radio checkbox">
												<input type="radio" name="selectAnswer" tabindex="0" class="hidden">
											</div>
										</td>
										<td>3333333</td>
										<td>Cell</td>
									</tr>
								</tbody>
							</table>
				  		</div>
				    	<div class="three wide column">
				    		<div class="ui vertical">
						    	<button class="ui positive basic mini button"><i class="icon plus"></i> 添 加</button>
								<button class="ui primary basic mini button"><i class="icon write"></i> 编 辑</button>
								<button class="ui negative basic mini button"><i class="icon remove"></i> 删 除</button>
						  	</div>
				    	</div>
				  	</div>
				</div>
			</div>
		</div><!-- 活动属性-子活动item end -->
		<!-- 前置条件 start -->
		<div class="ui tab segment" data-tab="three">
			<div class="ui mini form front_condition">
				<div class="five wide field">
				    <label>汇聚类型:</label>
				    <select name="convergeType" class="ui search dropdown convergeType">
				      	<option value="">选择</option>
				      	<option value="0">(空)</option>
				      	<option value="AND">And</option>
				      	<option value="XOR">Xor</option>
				    </select>
				</div>
				<div class="hideDiv">
					<div class="fourteen wide two fields">
						<div class="four wide field">
	                	  	<select name="voteModel" class="ui search dropdown voteMode">
	      						<option value="">请选择</option>
	      						<option value="0">(空)</option>
	      						<option value="toupiao">投票模式</option>
							</select>
	                	</div>
	                	<div class="five wide field">
						    <input type="text" name="voteText" placeholder="">
						</div>
					</div>
				</div>
				<div class="hideDiv">
					<div class="inline fields">
		              	<label for="isCreateNew_radio">多次进入:</label>
		              	<div class="field">
		              	  	<div class="ui radio checkbox">
		              	  	  	<input type="radio" name="isCreateNew_radio" tabindex="true" class="hidden">
		              	  	  	<label>是</label>
		              	  	</div>
		              	</div>
		              	<div class="field">
		              	  	<div class="ui radio checkbox">
		              	  	  	<input type="radio" name="isCreateNew_radio" tabindex="false" class="hidden">
		              	  	  	<label>否</label>
		              	  	</div>
		              	</div>
		              	<input type="hidden" name="isCreateNew" value="">
		            </div>
	            </div>
			</div>
		</div><!-- 前置条件 end -->
		<!-- 后置条件 start -->
		<div class="ui tab segment" data-tab="four">
			<div class="ui mini form post_condition">
				<div class="inline five wide field">
				    <label>转出类型:</label>
				    <select name="splitType" class="ui search dropdown">
				      	<option value="">选择</option>
				      	<option value="AND">And</option>
				      	<option value="XOR">Xor</option>
				    </select>
				</div>
				<div class="ui horizontal divider">选择目标活动</div>
				<div class="targetActivityShow content-div">
					<div class="ui middle aligned list">
						
					</div>
				</div>

				<div class="targetActivity hideDiv">
					
				</div>
				
			</div>
		</div><!-- 后置条件 end -->
		<!-- 扩展属性集 start -->
		<div class="ui tab segment" data-tab="five">
			<div class="ui mini form grid extended_attr">
			  	<div class="computer only row">
			  		<div class="twelve wide tablet computer column">
			  			<table class="ui blue sortable selectable celled striped compact table">
							<thead>
								<tr>
									<th class="one wide">选择</th>
									<th class="two wide">名</th>
									<th class="two wide">值</th>
								</tr>
							</thead>
							<tbody>
								
							</tbody>
						</table>
			  		</div>
			    	<div class="three wide column">
			    		<div class="ui vertical">
					    	<button class="ui positive basic mini button extendAttrAddBtn"><i class="icon plus"></i> 添 加</button>
							<button class="ui primary basic mini button extendAttrEditBtn"><i class="icon write"></i> 编 辑</button>
							<button class="ui negative basic mini button extendAttrDelBtn"><i class="icon remove"></i> 删 除</button>
					  	</div>
			    	</div>
			  	</div>
			</div>
		</div><!-- 扩展属性集 end -->
		<!-- 超时限制 start-->
		<div class="ui tab segment" data-tab="six">
			<div class="ui mini form timeout_limit">
				<div class="five wide field">
				    <label>限制时间:</label>
				    <input type="text" name="limitTime" placeholder="限制时间">
				</div>
				<div class="five wide field">
    				<label>到达限制时间执行代理:</label>
                	<select name="limitAgentClassName" class="ui search dropdown">
      					<option value="">请选择</option>
      					<option value="">(空)</option>
      					<option value="workflow.sendNext">自动提交</option>
      					<option value="workflow.mailParty">邮件通知参与者</option>
      					<option value="workflow.mailPartyLeader">邮件通知参与者领导</option>
					</select>      					
                </div>
                <div class="five wide field">
				    <label>警告时间:</label>
				    <input type="text" name="warnTime" placeholder="警告时间">
				</div>
				<div class="five wide field">
    				<label>到达警告时间执行代理:</label>
                	<select name="warnAgentClassName" class="ui search dropdown">
      					<option value="">请选择</option>
      					<option value="">(空)</option>
      					<option value="workflow.sendNext">自动提交</option>
      					<option value="workflow.mailParty">邮件通知参与者</option>
      					<option value="workflow.mailPartyLeader">邮件通知参与者领导</option>
					</select>      					
                </div>
                <div class="ui horizontal divider">最终期限集</div>
                <div class="ui grid timeout_limit_grid">
				  	<div class="computer only row">
				  		<div class="twelve wide tablet computer column content-div">
				  			<table class="ui blue sortable selectable celled striped compact table">
								<thead>
									<tr>
										<th>持续时间</th>
									</tr>
								</thead>
								<tbody>
									
								</tbody>
							</table>
				  		</div>
				    	<div class="three wide column">
				    		<div class="ui vertical">
						    	<button class="ui positive basic mini button timeoutLimitAddBtn"><i class="icon plus"></i> 增 加</button>
								<button class="ui primary basic mini button timeoutLimitEditBtn"><i class="icon write"></i> 编 辑</button>
								<button class="ui negative basic mini button timeoutLimitRemoveBtn"><i class="icon remove"></i> 移 走</button>
						  	</div>
				    	</div>
				  	</div>
				</div>
			</div>
		</div><!-- 超时限制 end-->
		<!-- 高级 start-->
		<div class="ui tab segment" data-tab="seven">
			<div class="ui mini form highLevel">
				<div class="five wide field">
				    <label>结束规则:</label>
				    <input type="text" name="finishRule" placeholder="结束规则">
				</div>
				<div class="five wide field">
				    <label>建立事件:</label>
				    <input type="text" name="activityCreateEvent" placeholder="建立事件">
				</div>
				<div class="five wide field">
				    <label>结束事件:</label>
				    <input type="text" name="activityEndEvent" placeholder="结束事件">
				</div>
			</div>
		</div><!-- 高级 end-->
		<!-- 监控信息 start -->
		<div class="ui tab segment" data-tab="eight">
			<div class="ui mini form monitorinf">
				<div class="five wide field">
    				<label>是否为临时监控:</label>
                	<select name="isResponsibleTem" class="ui search dropdown">
      					<option value="true">是</option>
      					<option value="false">否</option>
					</select>      					
                </div>
                <div class="ui grid monitorinf_grid">
				  	<div class="computer only row">
				  		<div class="twelve wide tablet computer column content-div">
				  			<table class="ui blue sortable selectable celled striped compact table">
				  				<thead>
				  					<tr>
				  						<th>监控者</th>
				  					</tr>
				  				</thead>
								<tbody>
									
								</tbody>
							</table>
				  		</div>
				    	<div class="three wide column">
				    		<div class="ui vertical">
						    	<button class="ui positive basic mini button monitorinfAddBtn"><i class="icon plus"></i> 增 加</button>
								<button class="ui primary basic mini button monitorinfEditBtn"><i class="icon write"></i> 编 辑</button>
								<button class="ui negative basic mini button monitorinfRemoveBtn"><i class="icon remove"></i> 删 除</button>
						  	</div>
				    	</div>
				  	</div>
				</div>
			</div>
		</div><!-- 监控信息 end -->
	  	<div class="actions inverted clearfix">
			<button class="ui right floated green inverted ok button">
				<i class="checkmark icon"></i>确定
			</button>
			<button class="ui right floated red inverted cancel button">
				<i class="remove icon"></i>取消
			</button>
		</div>
	</div><!-- 属性弹出层 end -->
	<!-- 活动属性-常规-定义 -->
	<div class="ui coupled small modal tab conventional_definition def_common">
  	  	<div class="ui pointing secondary menu">
		  	<a class="item active" data-tab="definition_1">常规</a>
		  	<a class="item" data-tab="definition_2">高级</a>
		</div>
		<div class="ui tab segment active" data-tab="definition_1">
			<div class="ui mini form">
			    <div class="five wide field">
			      	<label>ID:</label>
			      	<input name="conventional_definition_id" type="text" placeholder="ID">
			    </div>
			    <div class="five wide field">
			      	<label>名称:</label>
			      	<input name="conventional_definition_name" type="text" placeholder="名称">
			    </div>
				<div class="field">
    			  	<label>描述：</label>
    			  	<textarea name="conventional_definition_description" rows="2"></textarea>
    			</div>
			    <div class="five wide field">
				    <label>自定义参与者:</label>
				    <input name="conventional_definition_participant" type="text" placeholder="自定义参与者">
				</div>
				<input type="hidden" class="hidden" name="conventional_def_operate" value="">
			</div>
		</div>
		<div class="ui tab segment" data-tab="definition_2">
			<div class="ui top attached tabular mini menu">
	    	  	<a class="active item" data-tab="definition_2/a" value="commonly|一般">一般</a>
	    	  	<a class="item" data-tab="definition_2/b" value="creator|创建人">创建人</a>
	    	  	<a class="item" data-tab="definition_2/c" value="sender|发送人">发送人</a>
	    	  	<a class="item" data-tab="definition_2/d" value="preActCreater|前一环节创建人">前一环节创建人</a>
	    	  	<a class="item" data-tab="definition_2/e" value="historyactselect|历史环节处理人">历史环节处理人</a>
	    	</div>
	    	<div class="ui bottom attached active tab segment" data-tab="definition_2/a">
				<div class="ui mini form">
					<div class="fields">
						<div class="five wide field">
		    				<label>类型:</label>
		                	<select name="definition_type" class="ui search dropdown">
		      					<option value="">请选择</option>
		      					<option value="human|人">人</option>
		      					<option value="orgOrg|部门【部门】">部门【部门】</option>
		      					<option value="orgHuman|部门【人】">部门【人】</option>
		      					<option value="orgDefault|部门【默认】">部门【默认】</option>
		      					<option value="orgLeader|部门【领导】">部门【领导】</option>
		      					<option value="roleHuman|角色【人】">角色【人】</option>
		      					<option value="roleRole|角色【角色】">角色【角色】</option>
		      					<option value="allParty|所有人【人】">所有人【人】</option>
							</select>      					
		                </div>
		                <div class="five wide field">
					      	<label>名称:</label>
					      	<input type="text" name="def_name_show" placeholder="名称" readonly>
					      	<input type="hidden" name="definition_name" placeholder="名称" value="|">
					    </div>
					    <div class="five wide field">
					      	<label>附加参数1:</label>
					      	<input type="text" name="definition_param1" placeholder="附加参数">
					    </div>
					    <div class="five wide field">
					    	<label>附加参数2:</label>
						    <input type="text" name="definition_param2" placeholder="附加参数">
						</div>	
		            </div>
				</div>
	    	</div>
	    	<div class="ui bottom attached tab segment" data-tab="definition_2/b">
	    		<div class="ui mini form">
					<div class="fields">
						<div class="five wide field">
		    				<label>类型:</label>
		                	<select name="definition_type" class="ui search dropdown">
		      					<option value="">请选择</option>
		      					<option value="self|创建人本人">创建人本人</option>
		      					<option value="directleader|创建人领导">创建人领导</option>
		      					<option value="directundering|创建人下属">创建人下属</option>
		      					<option value="branch|创建人部门人员">创建人部门人员</option>
		      					<option value="branchLeading|创建人部门领导">创建人部门领导</option>
							</select>      					
		                </div>
					    <div class="five wide field">
					      	<label>附加参数1:</label>
					      	<input type="text" name="definition_param1" placeholder="附加参数">
					    </div>
					    <div class="five wide field">
					    	<label>附加参数2:</label>
						    <input type="text" name="definition_param2" placeholder="附加参数">
						</div>	
		            </div>
				</div>
	    	</div>
	    	<div class="ui bottom attached tab segment" data-tab="definition_2/c">
	    		<div class="ui mini form">
					<div class="fields">
						<div class="five wide field">
		    				<label>类型:</label>
		                	<select name="definition_type" class="ui search dropdown">
		      					<option value="">请选择</option>
		      					<option value="self|发送人本人">发送人本人</option>
		      					<option value="directleader|发送人领导">发送人领导</option>
		      					<option value="directundering|发送人下属">发送人下属</option>
		      					<option value="org|发送人部门人员">发送人部门人员</option>
		      					<option value="departUpperLeading|发送人部门领导">发送人部门领导</option>
							</select>      					
		                </div>
					    <div class="five wide field">
					      	<label>附加参数1:</label>
					      	<input type="text" name="definition_param1" placeholder="附加参数">
					    </div>
					    <div class="five wide field">
					    	<label>附加参数2:</label>
						    <input type="text" name="definition_param2" placeholder="附加参数">
						</div>	
		            </div>
				</div>
	    	</div>
	    	<div class="ui bottom attached tab segment" data-tab="definition_2/d">
	    		<div class="ui mini form">
					<div class="fields">
						<div class="five wide field">
		    				<label>类型:</label>
		                	<select name="definition_type" class="ui search dropdown">
		      					<option value="">请选择</option>
		      					<option value="preActCreSelf|前一环节创建人本人">前一环节创建人本人</option>
		      					<option value="preActCreLeader|前一环节创建人上级">前一环节创建人上级</option>
							</select>      					
		                </div>
					    <div class="five wide field">
					      	<label>附加参数1:</label>
					      	<input type="text" name="definition_param1" placeholder="附加参数">
					    </div>
					    <div class="five wide field">
					    	<label>附加参数2:</label>
						    <input type="text" name="definition_param2" placeholder="附加参数">
						</div>	
		            </div>
				</div>
	    	</div>
	    	<div class="ui bottom attached tab segment" data-tab="definition_2/e">
	    		<div class="ui mini form">
					<div class="fields">
						<div class="five wide field">
		    				<label>类型:</label>
		                	<select name="definition_type" class="ui search dropdown">
		      					<option value="">请选择</option>
		      					<option value="historyactivity|处理人本人">处理人本人</option>
		      					<option value="historyleader|处理人上级">处理人上级</option>
		      					<option value="historyunderling|处理人下属">处理人下属</option>
		      					<option value="hsitoryDepartLeader|处理人部门领导">处理人部门领导</option>
		      					<option value="hsitoryDepartMember|处理人部门人员">处理人部门人员</option>
							</select>      					
		                </div>
		                <div class="five wide field">
		    				<label>名称:</label>
		                	<select name="definition_name" class="ui search dropdown">
		      					<option value="idxxx|普通活动">普通活动</option>
							</select>      					
		                </div>
					    <div class="five wide field">
					      	<label>附加参数1:</label>
					      	<input type="text" name="definition_param1" placeholder="附加参数">
					    </div>
					    <div class="five wide field">
					    	<label>附加参数2:</label>
						    <input type="text" name="definition_param2" placeholder="附加参数">
						</div>	
		            </div>
				</div>
	    	</div>
	    	<button class="ui positive basic mini button definition_addBtn"><i class="icon plus"></i> 增 加 条 件</button>
			<button class="ui negative basic mini button definition_removeBtn"><i class="icon remove"></i> 删 除 条 件</button>
			<div class="ui divider hidden"></div>
	        <div class="ui grid definition_condition content-div">
			  	<div class="computer only row">
			  		<div class="tablet computer column">
			  			<table class="ui blue sortable selectable celled striped compact table">
			  				<thead>
								<tr>
									<th class="four wide">类别</th>
									<th class="four wide">类型</th>
									<th class="three wide">名称</th>
									<th class="three wide">参数1</th>
									<th class="three wide">参数2</th>
									<th class="three wide">条件</th>
								</tr>
							</thead>
							<tbody>
								
							</tbody>
						</table>
			  		</div>
			  	</div>
			</div>
		</div>
		<div class="actions inverted segment clearfix">
			<button class="ui right floated green inverted ok button">
				<i class="checkmark icon"></i>确定
			</button>
			<button class="ui right floated red inverted cancel button">
				<i class="remove icon"></i>取消
			</button>
		</div>
  	</div>
  	<!-- 活动属性-工具-添加 -->
	<div class="ui coupled small modal tab segment tool_add">
  	  	<div class="ui mini form">
  	  		<div class="fields">
  	  			<div class="five wide field">
	               	<label>类型:</label>
	                <select class="ui search dropdown">
		      			<option value="">请选择</option>
		      			<option value="1">应用</option>
		      			<option value="2">程序</option>
					</select>      					
	            </div>
	            <div class="ten wide field">
	    			<label>应用:</label>
					<div class="two fields">
						<div class="field">
	               		  	<select class="ui search dropdown">
	      						<option value="">请选择</option>
	      						<option value="1">修改数据</option>
	      						<option value="2">发送邮件</option>
	      						<option value="3">执行其它toolagent</option>
	      						<option value="4">获取数据</option>
							</select>      					
	               		</div>
	               		<div class="five wide field">
							<button class="ui facebook mini button definitionBtn"><i class="write icon"></i>定义</button>
	               		</div>
	               	</div>
	            </div>
  	  		</div>
            <div class="ui horizontal divider">实际参数集</div>
            <div class="ui grid">
    		  	<div class="row">
			  		<div class="ten wide tablet column">
			  			<table class="ui blue sortable selectable celled striped compact table">
							<thead>
								<tr>
									<th class="one wide">选择</th>
									<th class="two wide">应用</th>
									<th class="two wide">类型</th>
								</tr>
							</thead>
							<tbody>
								<tr id="tr1">
									<td>
										<div class="ui radio checkbox">
											<input type="radio" name="selectAnswer" tabindex="0" class="hidden">
										</div>
									</td>
									<td>1111111</td>
									<td>Aell</td>
								</tr>
							</tbody>
						</table>
			  		</div>
			    	<div class="three wide column">
			    		<div class="ui vertical">
					    	<button class="ui positive basic mini button actualParametersAdd1"><i class="icon plus"></i> 添 加</button>
							<button class="ui primary basic mini button"><i class="icon write"></i> 编 辑</button>
							<button class="ui negative basic mini button"><i class="icon remove"></i> 删 除</button>
					  	</div>
			    	</div>
			  	</div>
    		</div>
            <div class="ui divider hidden"></div>
			<div class="field">
    		  	<label>描述：</label>
    		  	<textarea rows="2"></textarea>
    		</div>
			<div class="ui horizontal divider">扩展属性集</div>
			<div class="ui grid">
    		  	<div class="row">
			  		<div class="ten wide tablet computer column">
			  			<table class="ui blue sortable selectable celled striped compact table">
							<thead>
								<tr>
									<th class="one wide">选择</th>
									<th class="two wide">应用</th>
									<th class="two wide">类型</th>
								</tr>
							</thead>
							<tbody>
								<tr id="tr1">
									<td>
										<div class="ui radio checkbox">
											<input type="radio" name="selectAnswer" tabindex="0" class="hidden">
										</div>
									</td>
									<td>1111111</td>
									<td>Aell</td>
								</tr>
							</tbody>
						</table>
			  		</div>
			    	<div class="three wide column">
			    		<div class="ui vertical">
					    	<button class="ui positive basic mini button actualParametersAdd2"><i class="icon plus"></i> 添 加</button>
							<button class="ui primary basic mini button"><i class="icon write"></i> 编 辑</button>
							<button class="ui negative basic mini button"><i class="icon remove"></i> 删 除</button>
					  	</div>
			    	</div>
			  	</div>
    		</div>
			<div class="ui divider hidden"></div>
    		<div class="actions inverted segment clearfix">
				<button class="ui right floated green inverted ok button">
					<i class="checkmark icon"></i>确定
				</button>
				<button class="ui right floated red inverted cancel button">
					<i class="remove icon"></i>取消
				</button>
			</div>		
		</div>
  	</div>
  	<!-- 工具-添加-添加 -->
	<div class="ui coupled small modal tab segment actualParametersDiv">
  	  	<div class="ui mini form">
  	  		<div class="field">
    			<label>实际参数:</label>
				<div class="two fields">
					<div class="five wide field">
            	   		<select class="ui search dropdown">
      						<option value="">请选择</option>
      						<option value="1">sourceReferenceld</option>
      						<option value="2">formId</option>
      						<option value="2">nextActivityInfo</option>
      						<option value="2">nextActivityName</option>
      						<option value="2">formType</option>
						</select>      					
            	   	</div>
            	   	<div class="five wide field">
						<button class="ui facebook mini button definitionBtn"><i class="write icon"></i>定义</button>
            	   	</div>
            	</div>
            </div>
  	  	</div>
    	<div class="actions inverted segment clearfix">
			<button class="ui right floated green inverted ok button">
				<i class="checkmark icon"></i>确定
			</button>
			<button class="ui right floated red inverted cancel button">
				<i class="remove icon"></i>取消
			</button>
		</div>		
  	</div>
  	<!-- 工具-添加-添加-定义 -->
	<div class="ui coupled small modal tab segment toolAddDefinition">
  		<div class="header">工作流相关数据集</div>
  		<div class="ui mini form grid">
		  	<div class="computer only row">
		  		<div class="twelve wide tablet computer column">
		  			<table class="ui blue sortable selectable celled striped compact table">
						<thead>
							<tr>
								<th class="one wide">选择</th>
								<th class="two wide">ID</th>
								<th class="two wide">名称</th>
								<th class="two wide">数据类型</th>
							</tr>
						</thead>
						<tbody>
							<tr id="tr1">
								<td>
									<div class="ui radio checkbox">
										<input type="radio" name="selectAnswer" tabindex="0" class="hidden">
									</div>
								</td>
								<td>1111111</td>
								<td>Aell</td>
								<td>Aell</td>
							</tr>
							<tr>
								<td>
									<div class="ui radio checkbox">
										<input type="radio" name="selectAnswer" tabindex="0" class="hidden">
									</div>
								</td>
								<td>3333333</td>
								<td>Cell</td>
								<td>Cell</td>
							</tr>
						</tbody>
					</table>
		  		</div>
		    	<div class="three wide column">
		    		<div class="ui vertical">
				    	<button class="ui positive basic mini button toolAddDefinitionAddBtn"><i class="icon plus"></i> 添 加</button>
						<button class="ui primary basic mini button"><i class="icon write"></i> 编 辑</button>
						<button class="ui negative basic mini button"><i class="icon remove"></i> 删 除</button>
				  	</div>
		    	</div>
		  	</div>
		</div>
		<div class="ui divider hidden"></div>
    	<div class="actions inverted segment clearfix">
			<button class="ui right floated green inverted ok button">
				<i class="checkmark icon"></i>确定
			</button>
			<button class="ui right floated red inverted cancel button">
				<i class="remove icon"></i>取消
			</button>
		</div>		
	</div>
	<!-- 工具-添加-添加-定义-添加 -->
	<div class="ui coupled large modal tab segment toolAddDefinitionAdd">
		<i class="close icon"></i>
		<div class="ui mini form">
  	  		<div class="fields">
  	  			<div class="five wide field">
				  	<label>ID:</label>
				  	<input type="text" placeholder="ID">
				</div>
	            <div class="five wide field">
				  	<label>名称:</label>
				  	<input type="text" placeholder="名称">
				</div>
				 <div class="five wide field">
				  	<label>初始值:</label>
				  	<input type="text" placeholder="初始值">
				</div>
				 <div class="five wide field">
				  	<label>长度:</label>
				  	<input type="text" placeholder="长度">
				</div>
  	  		</div>
  	  		<div class="five wide inline field">
	            <label>是排列:</label>
	            <select class="ui search dropdown">
		      		<option value="">请选择</option>
		      		<option value="0">(空)</option>
		      		<option value="1">是</option>
		      		<option value="2">否</option>
				</select>      					
	        </div>
            <div class="ui horizontal divider">类型</div>
            <div class="five wide inline field">
	            <label>类型:</label>
	            <select class="ui search dropdown">
		      		<option value="">请选择</option>
		     		<option value="1">Declared type</option>
		     		<option value="2">Enumeration type</option>
		     		<option value="3">List type</option>
		     		<option value="4">Record type</option>
		     		<option value="5">Schema type</option>
		     		<option value="6">Union type</option>
		     		<option value="7">基本类型</option>
		     		<option value="8">外部参考</option>
		     		<option value="9">数组类型</option>
				</select>      					
	        </div>

    		<div class="field">
    		  	<label>描述：</label>
    		  	<textarea rows="1"></textarea>
    		</div>
			<div class="ui horizontal divider">扩展属性集</div>
			<div class="ui grid">
    		  	<div class="row">
			  		<div class="ten wide tablet computer column">
			  			<table class="ui blue sortable selectable celled striped compact table">
							<thead>
								<tr>
									<th class="one wide">选择</th>
									<th class="two wide">应用</th>
									<th class="two wide">类型</th>
								</tr>
							</thead>
							<tbody>
								<tr id="tr1">
									<td>
										<div class="ui radio checkbox">
											<input type="radio" name="selectAnswer" tabindex="0" class="hidden">
										</div>
									</td>
									<td>1111111</td>
									<td>Aell</td>
								</tr>
							</tbody>
						</table>
			  		</div>
			    	<div class="three wide column">
			    		<div class="ui vertical">
					    	<button class="ui positive basic mini button"><i class="icon plus"></i> 添 加</button>
							<button class="ui primary basic mini button showDialog"><i class="icon write"></i> 编 辑</button>
							<button class="ui negative basic mini button"><i class="icon remove"></i> 删 除</button>
					  	</div>
			    	</div>
			  	</div>
    		</div>

			<div class="ui divider hidden"></div>
    		<div class="actions inverted segment clearfix">
				<button class="ui right floated green inverted ok button">
					<i class="checkmark icon"></i>确定
				</button>
				<button class="ui right floated red inverted cancel button">
					<i class="remove icon"></i>取消
				</button>
			</div>		
		</div>
	</div>

  	<!-- 工具-添加-定义 -->
  	<div class="ui coupled small modal tab segment tooldefinition">
  		<div class="header">应用集-定义</div>
  		<div class="ui horizontal divider"></div>
  		<div class="ui mini form grid">
		  	<div class="computer only row">
		  		<div class="twelve wide tablet computer column">
		  			<table class="ui blue sortable selectable celled striped compact table">
						<thead>
							<tr>
								<th class="one wide">选择</th>
								<th class="two wide">ID</th>
								<th class="two wide">名称</th>
							</tr>
						</thead>
						<tbody>
							<tr id="tr1">
								<td>
									<div class="ui radio checkbox">
										<input type="radio" name="selectAnswer" tabindex="0" class="hidden">
									</div>
								</td>
								<td>1111111</td>
								<td>Aell</td>
							</tr>
							<tr>
								<td>
									<div class="ui radio checkbox">
										<input type="radio" name="selectAnswer" tabindex="0" class="hidden">
									</div>
								</td>
								<td>2222222</td>
								<td>Bell</td>
							</tr>
							<tr>
								<td>
									<div class="ui radio checkbox">
										<input type="radio" name="selectAnswer" tabindex="0" class="hidden">
									</div>
								</td>
								<td>3333333</td>
								<td>Cell</td>
							</tr>
						</tbody>
					</table>
		  		</div>
		    	<div class="three wide column">
		    		<div class="ui vertical">
				    	<button class="ui positive basic mini button tooldefinitionAddBtn"><i class="icon plus"></i> 添 加</button>
						<button class="ui primary basic mini button"><i class="icon write"></i> 编 辑</button>
						<button class="ui negative basic mini button"><i class="icon remove"></i> 删 除</button>
				  	</div>
		    	</div>
		  	</div>
		</div>
		<div class="ui horizontal divider"></div>
    	<div class="actions inverted segment clearfix">
			<button class="ui right floated green inverted ok button">
				<i class="checkmark icon"></i>确定
			</button>
			<button class="ui right floated red inverted cancel button">
				<i class="remove icon"></i>取消
			</button>
		</div>		
	</div>
	<!-- 工具-添加-定义-添加 -->
	<div class="ui coupled large modal tab segment tooldefinition_add">
		<div class="ui mini form">
  	  		<div class="fields">
  	  			<div class="five wide field">
				  	<label>ID:</label>
				  	<input type="text" placeholder="ID">
				</div>
	            <div class="five wide field">
				  	<label>名称:</label>
				  	<input type="text" placeholder="名称">
				</div>
  	  		</div>
  	  		<div class="field">
    		  	<label>描述：</label>
    		  	<textarea rows="1"></textarea>
    		</div>
            <div class="ui horizontal divider">选择</div>
            <div class="five wide inline field">
	            <label>类型:</label>
	            <select class="ui search dropdown">
		      		<option value="">请选择</option>
		      		<option value="1">外部参考</option>
		      		<option value="2">形势参数集</option>
				</select>      					
	        </div>
            <div class="ui grid">
    		  	<div class="row">
			  		<div class="ten wide tablet column">
			  			<table class="ui blue sortable selectable celled striped compact table">
							<thead>
								<tr>
									<th class="one wide">ID</th>
									<th class="two wide">索引</th>
									<th class="two wide">方式</th>
									<th class="two wide">数据类型</th>
								</tr>
							</thead>
							<tbody>
								<tr id="tr1">
									<td>1111111</td>
									<td>2222222</td>
									<td>3333333</td>
									<td>4444444</td>
								</tr>
							</tbody>
						</table>
			  		</div>
			    	<div class="three wide column">
			    		<div class="ui vertical">
					    	<button class="ui positive basic mini button tooldefinitionAddAddBtn"><i class="icon plus"></i> 添 加</button>
							<button class="ui primary basic mini button showDialog"><i class="icon write"></i> 编 辑</button>
							<button class="ui negative basic mini button"><i class="icon remove"></i> 删 除</button>
					  	</div>
			    	</div>
			  	</div>
    		</div>
            <div class="ui divider hidden"></div>
			<div class="ui horizontal divider">扩展属性集</div>
			<div class="ui grid">
    		  	<div class="row">
			  		<div class="ten wide tablet computer column">
			  			<table class="ui blue sortable selectable celled striped compact table">
							<thead>
								<tr>
									<th class="one wide">选择</th>
									<th class="two wide">应用</th>
									<th class="two wide">类型</th>
								</tr>
							</thead>
							<tbody>
								<tr id="tr1">
									<td>
										<div class="ui radio checkbox">
											<input type="radio" name="selectAnswer" tabindex="0" class="hidden">
										</div>
									</td>
									<td>1111111</td>
									<td>Aell</td>
								</tr>
							</tbody>
						</table>
			  		</div>
			    	<div class="three wide column">
			    		<div class="ui vertical">
					    	<button class="ui positive basic mini button"><i class="icon plus"></i> 添 加</button>
							<button class="ui primary basic mini button showDialog"><i class="icon write"></i> 编 辑</button>
							<button class="ui negative basic mini button"><i class="icon remove"></i> 删 除</button>
					  	</div>
			    	</div>
			  	</div>
    		</div>
			<div class="ui divider hidden"></div>
    		<div class="actions inverted segment clearfix">
				<button class="ui right floated green inverted ok button">
					<i class="checkmark icon"></i>确定
				</button>
				<button class="ui right floated red inverted cancel button">
					<i class="remove icon"></i>取消
				</button>
			</div>		
		</div>
	</div>
	<!-- 工具-添加-定义-添加-添加 -->
	<div class="ui coupled small modal tab segment tooldefinition_add_add">
		<div class="ui mini form">
			<div class="five wide field">
		      	<label>ID:</label>
		      	<input type="text" placeholder="ID">
		    </div>
		    <div class="five wide field">
		      	<label>索引:</label>
		      	<input type="text" placeholder="索引">
		    </div>
		    <div class="five wide field">
	            <label>方式:</label>
	            <select class="ui search dropdown">
		     		<option value="">请选择</option>
		     		<option value="1">In</option>
		     		<option value="2">In and Out</option>
		     		<option value="3">Out</option>
				</select>      					
	        </div>
	        <div class="ui horizontal divider">类型</div>
	        <div class="five wide field">
	            <label>类型:</label>
	            <select class="ui search dropdown">
		     		<option value="">请选择</option>
		     		<option value="1">Declared type</option>
		     		<option value="2">Enumeration type</option>
		     		<option value="3">List type</option>
		     		<option value="4">Record type</option>
		     		<option value="5">Schema type</option>
		     		<option value="6">Union type</option>
		     		<option value="7">基本类型</option>
		     		<option value="8">外部参考</option>
		     		<option value="9">数组类型</option>
				</select>      					
	        </div>
		</div>
		<div class="ui divider hidden"></div>
    	<div class="actions inverted segment clearfix">
			<button class="ui right floated green inverted ok button">
				<i class="checkmark icon"></i>确定
			</button>
			<button class="ui right floated red inverted cancel button">
				<i class="remove icon"></i>取消
			</button>
		</div>		
	</div>
  	<!-- 工具-添加-扩展属性添加 -->
	<div class="ui coupled small modal tab segment tool_extendAttr_add">
  	  	<div class="ui mini form">
  	  		<div class="fields">
  	  			<div class="five wide field">
			      	<label>名称:</label>
			      	<input name="extendAttr_add_name" type="text" placeholder="名称">
			    </div>
			    <div class="five wide field">
			      	<label>值:</label>
			      	<input name="extendAttr_add_value" type="text" placeholder="值">
			    </div>
  	  		</div>
			<div class="ui divider hidden"></div>
    		<div class="actions inverted segment clearfix">
				<button class="ui right floated green inverted ok button">
					<i class="checkmark icon"></i>确定
				</button>
				<button class="ui right floated red inverted cancel button">
					<i class="remove icon"></i>取消
				</button>
			</div>
			<input type="hidden" name="extendAttr_add_operate" value="">		
		</div>
  	</div>
  	<!-- 后置条件-扩展属性-添加 -->
	<div class="ui coupled small modal tab segment postCondition_extendAttr_add">
  	  	<div class="ui mini form">
  	  		<div class="fields">
  	  			<div class="five wide field">
			      	<label>名称:</label>
			      	<input name="extendAttr_add_name" type="text" placeholder="名称">
			    </div>
			    <div class="five wide field">
			      	<label>值:</label>
			      	<input name="extendAttr_add_value" type="text" placeholder="值">
			    </div>
  	  		</div>
			<div class="ui divider hidden"></div>
    		<div class="actions inverted segment clearfix">
				<button class="ui right floated green inverted ok button">
					<i class="checkmark icon"></i>确定
				</button>
				<button class="ui right floated red inverted cancel button">
					<i class="remove icon"></i>取消
				</button>
			</div>
			<input type="hidden" name="extendAttr_add_operate" value="">		
		</div>
  	</div>
  	<!-- 后置条件-条件设置-关系设置 -->
  	<div class="ui coupled small modal tab segment relationshipPlacement">
  		<i class="close icon"></i>
  		<div class="header">关系设置</div>
  		<div class="ui mini form">
  			<div class="ui horizontal divider">选择条件代号</div>
  	  		<div class="fields condition_no">
               	
			</div>
			<div class="ui horizontal divider">选择关系</div>
			<div class="fields">
				<div class="inline field">
					<div class="ui radio checkbox">
						<input type="radio" name="relationship" tabindex="&&" class="hidden" value="">
						<label>并且</label>
					</div>
				</div>
				<div class="inline field">
					<div class="ui radio checkbox">
						<input type="radio" name="relationship" tabindex="||" class="hidden" value="">
						<label>或者</label>
					</div>
				</div>
			</div>
			<div class="ui horizontal divider">设置</div>
			<div class="two inline fields">
				<div class="five wide field">
					<button class="ui primary mini button relationshipGroup">
						<i class="cubes icon"></i>分组
					</button>
					<button class="ui mini button relationshipReset">
						<i class="reply all icon"></i>重置
					</button>
				</div>
				<div class="seven wide field delivery">
					<label>预览:</label>
					<input name="beanConditions_type" type="text" placeholder="" readonly value="">
				</div>
			</div>
										
			<div class="ui divider hidden"></div>
    		<div class="actions inverted segment clearfix">
				<button class="ui right floated green inverted ok button">
					<i class="checkmark icon"></i>确定
				</button>
				<button class="ui right floated red inverted cancel button">
					<i class="remove icon"></i>取消
				</button>
			</div>
		</div>
  	</div>
  	<!-- 活动属性-扩展属性-添加 -->
	<div class="ui coupled small modal tab segment extendAttr_add">
  	  	<div class="ui mini form">
  	  		<div class="fields">
  	  			<div class="five wide field">
			      	<label>名称:</label>
			      	<input name="extendAttr_add_name" type="text" placeholder="名称">
			    </div>
			    <div class="five wide field">
			      	<label>值:</label>
			      	<input name="extendAttr_add_value" type="text" placeholder="值">
			    </div>
  	  		</div>
			<div class="ui divider hidden"></div>
    		<div class="actions inverted segment clearfix">
				<button class="ui right floated green inverted ok button">
					<i class="checkmark icon"></i>确定
				</button>
				<button class="ui right floated red inverted cancel button">
					<i class="remove icon"></i>取消
				</button>
			</div>
			<input type="hidden" name="extendAttr_add_operate" value="">		
		</div>
  	</div>
  	<!-- 超时限制-增加 -->
	<div class="ui coupled small modal tab segment timeoutLimit_add">
  	  	<div class="ui mini form">
  	  		<div class="five wide field">
	            <label>执行:</label>
	            <select name="execution" class="ui search dropdown">
		     		<option value="">请选择</option>
		     		<option value="">(空)</option>
		     		<option value="SYNCHR">同步</option>
		     		<option value="ASYNCHR">异步</option>
				</select>      					
	        </div>
  	  		<div class="five wide field">
		      	<label>持续时间:</label>
		      	<input type="text" name="deadlineCondition" placeholder="持续时间">
		    </div>
		    <div class="five wide field">
		      	<label>异常名称:</label>
		      	<input type="text" name="exceptionName" placeholder="异常名称">
		    </div>
		    <input type="hidden" name="timeoutLimit_add_operate" value="">
  	  	</div>
		<div class="ui divider hidden"></div>
    	<div class="actions inverted segment clearfix">
			<button class="ui right floated green inverted ok button">
				<i class="checkmark icon"></i>确定
			</button>
			<button class="ui right floated red inverted cancel button">
				<i class="remove icon"></i>取消
			</button>
		</div>		
  	</div>
  	<!-- 监控信息-增加 -->
	<div class="ui coupled small modal tab segment monitorinf_add" parentsModal="prop_node">
  	  	<div class="ui mini form">
  	  		<div class="field">
    			<label>参与者集:</label>
				<div class="two fields">
					<div class="seven wide field">
            	   		<select name="definition_role" class="ui search disabled dropdown">
      						
						</select>   
						<input type="hidden" name="monitorinf_add_operate" value="">				
            	   	</div>
            	   	<div class="five wide field">
						<button class="ui facebook mini button definitionBtn"><i class="write icon"></i>定义</button>
            	   	</div>
            	</div>
            </div>
  	  	</div>
    	<div class="actions inverted segment clearfix">
			<button class="ui right floated green inverted ok button">
				<i class="checkmark icon"></i>确定
			</button>
			<button class="ui right floated red inverted cancel button">
				<i class="remove icon"></i>取消
			</button>
		</div>		
  	</div>
  	<!-- 监控信息-增加-定义 -->
  	<div class="ui coupled small modal tab monitorinfAddDefinition def_common">
  	  	<div class="ui pointing secondary menu">
		  	<a class="item active" data-tab="definition_one">常规</a>
		  	<a class="item" data-tab="definition_two">高级</a>
		</div>
		<div class="ui tab segment active" data-tab="definition_one">
			<div class="ui mini form">
			    <div class="five wide field">
			      	<label>ID:</label>
			      	<input type="text" name="conventional_definition_id" placeholder="ID">
			    </div>
			    <div class="five wide field">
			      	<label>名称:</label>
			      	<input type="text" name="conventional_definition_name" placeholder="名称">
			    </div>
				<div class="field">
    			  	<label>描述：</label>
    			  	<textarea name="conventional_definition_description" rows="2"></textarea>
    			</div>
			    <div class="five wide field">
				    <label>自定义参与者:</label>
				    <input type="text" name="conventional_definition_participant" placeholder="自定义参与者">
				</div>
				<div class="five wide field">
		    		<label>自定义角色:</label>
		            <select name="conventional_definition_role" class="ui search dropdown">
		      			<option value="">请选择</option>
		      			<option value="history">历史参与者</option>
		      			<option value="responsible">监控者</option>
		      			<option value="share">共享</option>
					</select>     					
		        </div> 
		        <input type="hidden" class="hidden" name="monitorinf_add_operate" value="">
			</div>
		</div>
		<div class="ui tab segment" data-tab="definition_two">
			<div class="ui top attached tabular mini menu">
	    	  	<a class="active item" data-tab="definition_two/a" value="commonly|一般">一般</a>
	    	  	<a class="item" data-tab="definition_two/b" value="processer|当前处理人">当前处理人</a>
	    	  	<a class="item" data-tab="definition_two/c" value="sender|发送人">发送人</a>
	    	  	<a class="item" data-tab="definition_two/d" value="preActCreater|前一环节创建人">前一环节创建人</a>
	    	</div>
	    	<div class="ui bottom attached active tab segment" data-tab="definition_two/a">
				<div class="ui mini form">
					<div class="fields">
						<div class="five wide field">
		    				<label>类型:</label>
		                	<select name="definition_type" class="ui search dropdown">
		      					<option value="">请选择</option>
		      					<option value="human|人">人</option>
		      					<option value="orgOrg|部门【部门】">部门【部门】</option>
		      					<option value="orgHuman|部门【人】">部门【人】</option>
		      					<option value="orgDefault|部门【默认】">部门【默认】</option>
		      					<option value="orgLeader|部门【领导】">部门【领导】</option>
		      					<option value="roleHuman|角色【人】">角色【人】</option>
		      					<option value="roleRole|角色【角色】">角色【角色】</option>
		      					<option value="allParty|所有人【人】">所有人【人】</option>
							</select>      					
		                </div>
		                <div class="eight wide field">
					      	<label>名称:</label>
					      	<input type="text" name="def_name_show" placeholder="名称" readonly>
					      	<input type="hidden" name="definition_name" placeholder="名称" value="|">
					    </div>
					    <div class="five wide field">
				    		<label>角色:</label>
				            <select name="definition_role" class="ui search dropdown">
				      			<option value="">请选择</option>
		      					<option value="history">历史参与者</option>
		      					<option value="responsible">监控者</option>
		      					<option value="share">共享</option>
							</select>      					
				        </div>
					    <div class="five wide field">
					      	<label>附加参数1:</label>
					      	<input type="text" name="definition_param1" placeholder="附加参数">
					    </div>
					    <div class="five wide field">
					    	<label>附加参数2:</label>
						    <input type="text" name="definition_param2" placeholder="附加参数">
						</div>	
		            </div>
				</div>
	    	</div>
	    	<div class="ui bottom attached tab segment" data-tab="definition_two/b">
	    		<div class="ui mini form">
					<div class="fields">
						<div class="five wide field">
		    				<label>类型:</label>
		                	<select name="definition_type" class="ui search dropdown">
		      					<option value="">请选择</option>
		      					<option value="directleader|当前处理人领导">当前处理人领导</option>
		      					<option value="DepartUpperLeading|当前处理人部门领导">当前处理人部门领导</option>
							</select>      					
		                </div>
		                <div class="five wide field">
				    		<label>角色:</label>
				            <select name="definition_role" class="ui search dropdown">
				      			<option value="">请选择</option>
		      					<option value="history">历史参与者</option>
		      					<option value="responsible">监控者</option>
		      					<option value="share">共享</option>
							</select>      					
				        </div>
					    <div class="five wide field">
					      	<label>附加参数1:</label>
					      	<input type="text" name="definition_param1" placeholder="附加参数">
					    </div>
					    <div class="five wide field">
					    	<label>附加参数2:</label>
						    <input type="text" name="definition_param2" placeholder="附加参数">
						</div>	
		            </div>
				</div>
	    	</div>
	    	<div class="ui bottom attached tab segment" data-tab="definition_two/c">
	    		<div class="ui mini form">
					<div class="fields">
						<div class="five wide field">
		    				<label>类别:</label>
		                	<select name="definition_type" class="ui search dropdown">
		                	<option value="">请选择</option>
		      					<option value="self|发送人本人">发送人本人</option>
		      					<option value="directleader|发送人领导">发送人领导</option>
		      					<option value="directundering|发送人下属">发送人下属</option>
		      					<option value="org|发送人部门人员">发送人部门人员</option>
		      					<option value="departUpperLeading|发送人部门领导">发送人部门领导</option>
							</select>      					
		                </div>
		                <div class="five wide field">
				    		<label>角色:</label>
				            <select name="definition_role" class="ui search dropdown">
				      			<option value="">请选择</option>
		      					<option value="history">历史参与者</option>
		      					<option value="responsible">监控者</option>
		      					<option value="share">共享</option>
							</select>      					
				        </div>
					    <div class="five wide field">
					      	<label>附加参数1:</label>
					      	<input type="text" name="definition_param1" placeholder="附加参数">
					    </div>
					    <div class="five wide field">
					    	<label>附加参数2:</label>
						    <input type="text" name="definition_param2" placeholder="附加参数">
						</div>	
		            </div>
				</div>
	    	</div>
	    	<div class="ui bottom attached tab segment" data-tab="definition_two/d">
	    		<div class="ui mini form">
					<div class="fields">
						<div class="five wide field">
		    				<label>类别:</label>
		                	<select name="definition_type" class="ui search dropdown">
		      					<option value="">请选择</option>
		      					<option value="preActCreSelf|前一环节创建人本人">前一环节创建人本人</option>
		      					<option value="preActCreLeader|前一环节创建人上级">前一环节创建人上级</option>
							</select>      					
		                </div>
		                <div class="five wide field">
				    		<label>角色:</label>
				            <select name="definition_role" class="ui search dropdown">
				      			<option value="">请选择</option>
		      					<option value="history">历史参与者</option>
		      					<option value="responsible">监控者</option>
		      					<option value="share">共享</option>
							</select>      					
				        </div>
					    <div class="five wide field">
					      	<label>附加参数1:</label>
					      	<input type="text" name="definition_param1" placeholder="附加参数">
					    </div>
					    <div class="five wide field">
					    	<label>附加参数2:</label>
						    <input type="text" name="definition_param2" placeholder="附加参数">
						</div>	
		            </div>
				</div>
	    	</div>
	    	<button class="ui positive basic mini button monitorinfDefintionAddBtn"><i class="icon plus"></i> 增 加 条 件</button>
			<button class="ui negative basic mini button monitorinfDefintionRemoveBtn"><i class="icon remove"></i> 删 除 条 件</button>
			<div class="ui divider hidden"></div>
	        <div class="ui grid definition_condition content-div">
			  	<div class="computer only row">
			  		<div class="tablet computer column">
			  			<table class="ui blue sortable selectable celled striped compact table">
			  				<thead>
								<tr>
									<th class="four wide">类别</th>
									<th class="four wide">类型</th>
									<th class="three wide">名称</th>
									<th class="three wide">参数1</th>
									<th class="three wide">参数2</th>
									<th class="three wide">角色</th>
								</tr>
							</thead>
							<tbody>

							</tbody>
						</table>
			  		</div>
			  	</div>
			</div>
		</div>
		<div class="actions inverted segment clearfix">
			<button class="ui right floated green inverted ok button">
				<i class="checkmark icon"></i>确定
			</button>
			<button class="ui right floated red inverted cancel button">
				<i class="remove icon"></i>取消
			</button>
		</div>
  	</div>

  	<!-- 连线属性弹出层 -->
	<div class="ui coupled modal tab segment prop_edge">
		<div class="header">转移属性</div>
  	  	<div class="ui mini form">
  	  		<div class="targetActivity">
				
			</div>
  	  	</div>
		<div class="ui divider hidden"></div>
    	<div class="actions inverted segment clearfix">
			<button class="ui right floated green inverted ok button">
				<i class="checkmark icon"></i>确定
			</button>
			<button class="ui right floated red inverted cancel button">
				<i class="remove icon"></i>取消
			</button>
		</div>		
  	</div>
  	<!-- 选择角色弹出层 -->
  	<div class="ui coupled modal tab role_manage">
	    <i class="close icon"></i>
	    <div id="role-top" class="topfont addborder popup">
			<i class="add user icon"></i>角色管理
		</div>
		<div id="role-center">
			<form id="searchForm">
				<div>
					<div class="ui icon mini input role-search">
		              	<label>角色名称：</label>
					  	<input type="text" name="roleName" placeholder="搜索...">
					  	<i class="search link icon"></i>
					</div>
					<button type="button" class="ui google plus mini button resetBtn">
					  	<i class="reply all plus icon"></i>
					  	重置
					</button>
					<button type="button" class="ui facebook mini button okBtn">
					  	<i class="checkmark icon"></i>
					  	确定
					</button>
				</div>
			</form>
			<input type="hidden" name="offset" id="offset" />
			<input type="hidden" name="size" id="size" />
			<div class="content-tab">
				
			</div>
		</div>
		<div id="pageDiv"></div>
	</div>

	<script type="text/javascript" src="js/jquery.js" charset="utf-8"></script>
	<script type="text/javascript" src="js/common.js" charset="utf-8"></script>
	<script type="text/javascript" src="js/d3.v3.js" charset="utf-8"></script>
	<script type="text/javascript" src="js/juicer-min.js" charset="utf-8"></script>
	<script type="text/javascript" src="layer/layer.js" charset="utf-8"></script>
	<script type="text/javascript" src="semantic-ui-2.2.13/dist/semantic.js" charset="utf-8"></script>
	<script type="text/javascript" src="ztree/js/jquery.ztree.all.js"></script>
	<script type="text/javascript" src="js/jquery-form.min.js"></script>
	<script type="text/javascript" src="js/jquery.mCustomScrollbar.concat.min.js" charset="utf-8"></script>
	<script type="text/javascript" src="js/vkbeautify.js" charset="utf-8"></script>
	<script type="text/javascript" src="js/base64.js" charset="utf-8"></script>
	<script type="text/javascript" src="laypage/laypage.js"></script>
	<script type="text/javascript" src="js/flowchart.js" charset="utf-8"></script>
	
	<script>
		juicer.set({  
			'tag::operationOpen': '{@',  
			'tag::operationClose': '}',  
			'tag::interpolateOpen': '{{=',  
			'tag::interpolateClose': '}}'  
		});
		// 通过`juicer.register`创建模板内引用方法
		juicer.register('juicer_stringify', function(jsonObj) {
		    return JSON.stringify(jsonObj);
		});
	</script>

	<script id="tpl" type="text/template"><!-- 可以通过模板生成activity，暂时没用 -->
	    <activity Id="{{=activity.id}}" Name="{{=activity.title}}" form-id="" formdisplayschema="" hisformdisplayschema="">
	        <operations/>
	        <text-limit/>
	    </activity>
	</script>
	<!-- 扩展属性集tpl -->
	<script id="extended_attr_tpl" type="text/template">
		<tr jsonstr="{{=jsonstr}}">
			<td>
				<div class="ui radio checkbox">
					<input type="radio" name="selectItem" tabindex="0" class="hidden">
				</div>
			</td>
			<td>{{=data.name}}</td>
			<td>{{=data.value}}</td>
		</tr>
	</script>
	<!-- 角色管理tpl -->
	<script id="role_manage_tpl" type="text/template">
		<div class="row">
			<div class="column">
				<table class="ui blue sortable selectable celled striped compact table">
					<thead>
						<tr>
							<th class="one wide">选择</th>
							<th class="one wide">角色名称</th>
							<th class="three wide">所属组织</th>
							<th class="three wide">描述</th>
						</tr>
					</thead>
					<tbody>
					{@each list as it,index}
						<tr jsonstr="{{=it|juicer_stringify}}">
							<td>
								<div class="ui radio checkbox">
									<input type="radio" name="selectItem" tabindex="0" class="hidden">
								</div>
							</td>
							<td>{{=it.ROLENAME}}</td>
							<td>{{=it.ROLEID}}</td>
							<td>{{=it.DESCRIPTION}}</td>
						</tr>
			        {@/each}
					</tbody>
				</table>
			</div>
		</div>
	</script>
	<!-- Transition转移属性tpl -->
	<script id="transition_tpl" type="text/template">
		<div class="ui top attached tabular mini menu">
    	  	<a class="active item" data-tab="four/a">转移信息</a>
    	  	<a class="item" data-tab="four/b">条件设置</a>
    	  	<a class="item" data-tab="four/c">事件</a>
    	</div>
    	<div class="ui bottom attached active tab segment" data-tab="four/a">
			<div class="ui mini form">
				<div class="fields">
				    <div class="five wide field">
				      <label>ID:</label>
				      <input type="text" name="edgeId" placeholder="ID">
				    </div>
				    <div class="four wide field">
				      <label>名称:</label>
				      <input type="text" name="edgeName" placeholder="名称">
				    </div>
				    <div class="four wide field">
					    <label>来自:</label>
					    <input type="text" name="sourceTitle" placeholder="来自" disabled="disabled">
					</div>
					<div class="four wide field">
					    <label>到:</label>
					    <input type="text" name="targetTitle" placeholder="到" disabled="disabled">
					</div>
				</div>
				<div class="field">
    			  	<label>描述：</label>
    			  	<textarea name="description" rows="2"></textarea>
    			</div>
				<div class="ui horizontal divider">扩展属性集</div>
    			<div class="ui mini form grid transferInf_extended_attr">
				  	<div class="computer only row">
				  		<div class="twelve wide tablet computer column postCondi_extendedAttr">
				  			<table class="ui blue sortable selectable celled striped compact table">
								<thead>
									<tr>
										<th class="one wide">选择</th>
										<th class="two wide">名</th>
										<th class="two wide">值</th>
									</tr>
								</thead>
								<tbody>
									
								</tbody>
							</table>
				  		</div>
				    	<div class="three wide column">
				    		<div class="ui vertical">
						    	<button class="ui positive basic mini button extendAttrAddBtn"><i class="icon plus"></i> 添 加</button>
								<button class="ui primary basic mini button extendAttrEditBtn"><i class="icon write"></i> 编 辑</button>
								<button class="ui negative basic mini button extendAttrDelBtn"><i class="icon remove"></i> 删 除</button>
						  	</div>
				    	</div>
				  	</div>
				</div>
    			
			</div>
    	</div>
    	<div class="ui bottom attached tab segment" data-tab="four/b">
    		<div class="ui mini form">
	    		<div class="inline fields">
					<div class="five wide field">
					    <label>类型:</label>
					    <select name="conditype" class="ui search dropdown">
					      	<option value="">选择</option>
					      	<option value="0">(空)</option>
					      	<option value="OTHERWISE">其它</option>
					      	<option value="EXCEPTION">异常</option>
					      	<option value="WORKFLOWBEAN">按业务对象转移</option>
					      	<option value="CONDITION">条件</option>
					      	<option value="TACHE">环节名称转移</option>
					      	<option value="USERDEFINE">用户自定义</option>
					      	<option value="DEFAULTEXCEPTION">缺省异常</option>
					      	<option value="CUSTOM">自定义转移</option>
					    </select>
					</div>
	    		</div>
	    		<!-- 条件设置-类型-异常 -->
				<div class="myitem hideDiv exceptionDiv">
					<div class="five wide field">
					    <label>请选择异常:</label>
					    <select name="condiException" class="ui search dropdown">
					      	<option value="请选择异常">请选择异常</option>
					    </select>
					</div>
	            </div>
	            <!-- 条件设置-类型-按业务对象转移 -->
	            <div class="myitem hideDiv workflowbeanDiv">
		            <div class="inline fields">
						<div class="five wide field">
						    <label>业务对象:</label>
						    <select name="bean" class="ui search dropdown">
						      	<option value="">请选择业务对象</option>
						      	<option value="0">(空)</option>
						      	<option value="System_Wf_Source_Party">发送人</option>
						      	<option value="System_cre_id">创建人</option>
						    </select>
						</div>
						<div class="five wide field">
						    <label>参数字段:</label>
						    <select name="paramField" class="ui search dropdown">
						      	<option value="0">默认</option>
						    </select>
						</div>
					</div>
					<!-- 业务对象-发送人 -->
					<div class="myitem hideDiv detailDiv">
		            	<div class="inline three fields">
							<div class="five wide field">
							    <label>方法:</label>
							    <select name="key" class="ui search dropdown wide">
							      	<option value="">请选择</option>
							      	<option value="0">(空)</option>
							      	<option value="CorpName">获取组织名称</option>
							      	<option value="Extattr">获取人员扩展属性1</option>
							      	<option value="MObilephone">获取人员移动电话号码</option>
							      	<option value="Firstname">获取人员姓氏</option>
							      	<option value="Gender">获取人员性别</option>
							      	<option value="Birthday">获取人员出生日期</option>
							      	<option value="Securitylevel">获取人员安全级别</option>
							      	<option value="Mainemail">获取人员常用EMAI</option>
							      	<option value="Lastname">获取人员名字</option>
							      	<option value="Duty">获取人员职务</option>
							      	<option value="Homeaddress">获取人员家庭住址</option>
							      	<option value="AdminLevel">获取人员级别</option>
							      	<option value="Workno">获取人员工号</option>
							      	<option value="Callname">获取人员称呼</option>
							      	<option value="Otheremail">获取人员备用EMAIL</option>
							      	<option value="Instantmessage">获取人员即时消息号</option>
							      	<option value="Name">获取人员姓名</option>
							      	<option value="Officeaddress">获取人员工作地点ID</option>
							      	<option value="Fixedphone">获取人员固定电话号码</option>
							    </select>
							</div>
		            		<div class="field">
							    <label>条件1:</label>
							    <select name="sign_one" class="ui search dropdown condition_sel">
							      	<option value="">请选择</option>
							    </select>
							</div>
							<div class="field">
							    <label>参考值1:</label>
							    <input type="text" name="displayValue_one" placeholder="参考值">
							</div>
		            	</div>
		            	<div class="inline three fields">
							<div class="five wide field">
							    <label>关系:</label>
							    <select name="fieldCondition_type" class="ui search dropdown">
							      	<option value="AND">并且</option>
							      	<option value="||">或者</option>
							    </select>
							</div>
		            		<div class="field">
							    <label>条件2:</label>
							    <select name="sign_two" class="ui search dropdown condition_sel">
							      	<option value="">请选择</option>
							    </select>
							</div>
							<div class="field">
							    <label>参考值2:</label>
							    <input type="text" name="displayValue_two" placeholder="参考值">
							</div>
		            	</div>
		            </div>

					<div class="fields">
						<div class="five wide field">
							<button class="ui positive basic mini button condition_addBtn"><i class="icon plus"></i> 增 加 条 件</button>
							<button class="ui negative basic mini button condition_removeBtn"><i class="icon remove"></i> 删 除 条 件</button>
							
						</div>
						<div class="ten wide field">
							<div class="two fields">
								<div class="seven wide field">
			            	   		<input type="text" name="beanConditions_type" placeholder="整体关系" readonly>			
			            	   	</div>
			            	   	<div class="field">
									<button class="ui facebook mini button relationshipPlaBtn"><i class="write icon"></i>关系设置</button>
			            	   	</div>
			            	</div>
						</div>
		            </div>
					<div class="ui divider hidden"></div>
			        <div class="ui grid conditionList2">
					  	<div class="computer only row">
					  		<div class="tablet computer column">
					  			<table class="ui blue sortable selectable fixed single line celled striped compact table">
					  				<thead>
										<tr>
											<th class="two wide">编号</th>
											<th class="two wide">业务对象</th>
											<th class="two wide">参数字段</th>
											<th class="two wide">方法</th>
											<th class="two wide">运算符1</th>
											<th class="two wide">参考值1</th>
											<th class="two wide">关系</th>
											<th class="two wide">运算符2</th>
											<th class="two wide">参考值2</th>
											<th class="two wide">返回类型</th>
										</tr>
									</thead>
									<tbody>
										
									</tbody>
								</table>
					  		</div>
					  	</div>
					</div>	
					
	            </div>
	            <!-- 条件设置-类型-条件 -->
	            <div class="myitem hideDiv conditionDiv">
	            	<div class="ui horizontal divider">字段条件</div>
	            	<div class="inline fields">
						<div class="five wide field">
						    <label>字段:</label>
						    <select name="key" class="ui search dropdown">
						      	<option value="">请选择</option>
						      	<option value="0">(空)</option>
						      	<option value="sourceReferenceId">sourceReferenceId</option>
						      	<option value="formId">formId</option>
						      	<option value="nextActivityName">nextActivityName</option>
						      	<option value="formType">formType</option>
						    </select>
						</div>
	            		<div class="five wide field">
						    <label>条件1:</label>
						    <select name="sign_one" class="ui search dropdown condition_sel">
						      	<option value="">请选择</option>
						    </select>
						</div>
						<div class="five wide field">
						    <label>参考值1:</label>
						    <input type="text" name="displayValue_one" placeholder="参考值">
						</div>
	            	</div>
	            	<div class="inline fields">
						<div class="five wide field">
						    <label>关系:</label>
						    <select name="fieldCondition_type" class="ui search dropdown">
						      	<option value="AND">并且</option>
						      	<option value="||">或者</option>
						    </select>
						</div>
	            		<div class="five wide field">
						    <label>条件2:</label>
						    <select name="sign_two" class="ui search dropdown condition_sel">
						      	<option value="">请选择</option>
						      	<option value="0">(空)</option>
						    </select>
						</div>
						<div class="five wide field">
						    <label>参考值2:</label>
						    <input type="text" name="displayValue_two" placeholder="参考值">
						</div>
	            	</div>
					<div class="inline fields">
						<div class="five wide field">
			            	<button class="ui positive basic mini button condition_addBtn"><i class="icon plus"></i> 增 加 条 件</button>
							<button class="ui negative basic mini button condition_removeBtn"><i class="icon remove"></i> 删 除 条 件</button>
						</div>
						<div class="five wide field">
						    <label>整体关系:</label>
						    <select name="fieldConditions_type" class="ui search dropdown">
						      	<option value="AND">并且</option>
						      	<option value="||">或者</option>
						    </select>
						</div>
					</div>
					<div class="ui divider hidden"></div>
			        <div class="ui grid conditionList">
					  	<div class="computer only row">
					  		<div class="tablet computer column">
					  			<table class="ui blue sortable selectable celled striped compact table">
					  				<thead>
										<tr>
											<th class="three wide">字段</th>
											<th class="three wide">条件1</th>
											<th class="three wide">参考值1</th>
											<th class="two wide">关系</th>
											<th class="three wide">条件2</th>
											<th class="three wide">参考值2</th>
											<th class="three wide">类型</th>
										</tr>
									</thead>
									<tbody>
										
									</tbody>
								</table>
					  		</div>
					  	</div>
					</div>
	            </div>
	            <!-- 条件设置-类型-用户自定义 -->
				<div class="myitem hideDiv userdefineDiv">
					<div class="inline fields">	
						<div class="five wide field">
						    <label>条件:</label>
						    <input name="condition_data" type="text" placeholder="条件">
						</div>
					</div>
	            </div>
	            <!-- 条件设置-类型-自定义转移 -->
				<div class="myitem hideDiv customDiv">
					<div class="ui form">
					  	<div class="field">
					  	  	<label>表达式：</label>
					  	  	<textarea></textarea>
					  	</div>
					</div>
	            </div>
			</div>
    	</div>
    	<div class="ui bottom attached tab segment" data-tab="four/c">
    		<div class="ui mini form">
				<div class="five wide field">
				    <label>任务委派规则:</label>
				    <select name="transitionEventType" class="ui search dropdown">
				      	<option value="">选择</option>
				      	<option value="transitionScript">脚本类型</option>
				      	<option value="transitionClass">程序类型</option>
				    </select>
				</div>
				<div class="five wide field">
				    <label>转移事件:</label>
				    <input type="text" name="transitionEvent" placeholder="转移事件">
				</div>
			</div>
    	</div>
	</script><!-- Transition转移属性tpl-end -->

	<script>
		var package_id = 'Package_' + randomWord(false, 8);
		var workflow_name = '过程';
		var workflow_id = package_id + '_Wor1';
		var creat_time = new Date().pattern("yyyy-MM-dd HH:mm:ss");
		
		//定义生成 node id 序列
		var seqer_nodeID = serial_marker();
		seqer_nodeID.set_prefix(workflow_id + "_Act");
		//定义生成 edge id 序列
		var seqer_edgeID = serial_marker();
		seqer_edgeID.set_prefix(workflow_id + "_Tra");
		//定义生成 参与者id 序列
		var seqer_participantID = serial_marker();
		seqer_participantID.set_prefix(workflow_id + "_Par");

		$(function() {
			//数据表格添加点击选中行
			$('.toolgrid,.extended_attr,.post_condition,.prop_edge,.role_manage').on('click', 'tbody tr', function() {
				$(this).addClass('active').siblings().removeClass('active');
				$(this).find('input:radio').prop('checked','checked');
			});	
			
			$('.monitorinf,.conventional_definition,.timeout_limit,.monitorinfAddDefinition tbody').on('click', 'tr', function() {
				$(this).addClass('active').siblings().removeClass('active');
			});	
			
			$('.front_condition .dropdown.convergeType').on('change', function(e) {
				var convergeType = $(this).val();
				if (convergeType == 0) {//空
					$(this).parents('.field').siblings().addClass('hideDiv');
				}
				if (convergeType == 'AND') {//And
					$(this).parents('.field').siblings().eq(0).removeClass('hideDiv');
					$(this).parents('.field').siblings().eq(1).addClass('hideDiv');
				}
				if (convergeType == 'XOR') {//Xor
					$(this).parents('.field').siblings().eq(0).addClass('hideDiv');
					$(this).parents('.field').siblings().eq(1).removeClass('hideDiv');
				}
			});

			//编辑工具(保存)
			$('.editor-toolbar .icon.save').on('click', function() {
				var dataTab = $('.full-right-btn .item.active').attr('data-tab');
				$('.full-right-btn .item').not($('.full-right-btn .item.active')).trigger('click');//触发点击事件获取xpdl和xml
				$('.full-right-btn .item[data-tab="'+dataTab+'"]').trigger('click');
				var xpdl = $('#xpdlContainer xmp').text();
				var xml = $('#xmlContainer xmp').text();
				var xpdl_top =
					'<?xml version="1.0" encoding="UTF-8" standalone="no"?>'+
				    '<Package xmlns="http://www.wfmc.org/2002/XPDL1.0" xmlns:xpdl="http://www.wfmc.org/2002/XPDL1.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" Id="'+package_id+'" Name="新包" xsi:schemaLocation="http://www.wfmc.org/2002/XPDL1.0 http://wfmc.org/standards/dtd/TC-1025_schema_10_xpdl.xsd">'+
				    '    <PackageHeader>'+
				    '        <XPDLVersion>1.0</XPDLVersion>'+
				    '        <Vendor>GENTLESOFT</Vendor>'+
				    '        <Created>'+creat_time+'</Created>'+
				    '    </PackageHeader>'+
				    '    <RedefinableHeader PublicationStatus="UNDER_TEST">'+
				    '        <Author>管理员</Author>'+
				    '        <Version>1.0</Version>'+
				    '    </RedefinableHeader>'+
				    '    <ConformanceClass GraphConformance="NON_BLOCKED"/>'+
				    '    <Script Type="text/javascript"/>'+
				    '    <DataFields>'+
				    '        <DataField Id="sourceReferenceId" IsArray="FALSE" Name="sourceReferenceId">'+
				    '            <DataType>'+
				    '                <BasicType Type="STRING"/>'+
				    '            </DataType>'+
				    '            <InitialValue>null</InitialValue>'+
				    '        </DataField>'+
				    '        <DataField Id="formId" IsArray="FALSE" Name="formId">'+
				    '            <DataType>'+
				    '                <BasicType Type="STRING"/>'+
				    '            </DataType>'+
				    '            <InitialValue>null</InitialValue>'+
				    '        </DataField>'+
				    '        <DataField Id="nextActivityInfo" IsArray="FALSE" Name="nextActivityInfo">'+
				    '            <DataType>'+
				    '                <ExternalReference location="org.gentlesoft.wf.NextActivitiesParty"/>'+
				    '            </DataType>'+
				    '            <InitialValue>null</InitialValue>'+
				    '        </DataField>'+
				    '        <DataField Id="nextActivityName" IsArray="FALSE" Name="nextActivityName">'+
				    '            <DataType>'+
				    '                <ExternalReference location="java.util.ArrayList"/>'+
				    '            </DataType>'+
				    '            <InitialValue>null</InitialValue>'+
				    '        </DataField>'+
				    '        <DataField Id="formType" IsArray="FALSE" Name="formType">'+
				    '            <DataType>'+
				    '                <BasicType Type="STRING"/>'+
				    '            </DataType>'+
				    '            <InitialValue>null</InitialValue>'+
				    '        </DataField>'+
				    '    </DataFields>';
				var xpdl_end = 
					'    <ExtendedAttributes>'+
				    '        <ExtendedAttribute Name="MadeBy" Value="com.gentlesoft.tools.wfd"/>'+
				    '        <ExtendedAttribute Name="Version" Value="1.4.2"/>'+
				    '    </ExtendedAttributes>'+
				    '</Package>';
				var xml_top = '<?xml version="1.0" encoding="UTF-8"?><pkg-config xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" Id="'+package_id+'" Name="新包" Version="" xsi:noNamespaceSchemaLocation="../dtd/flowactconfig.xsd">';
				var xml_end = '</pkg-config>';
				xpdl = vkbeautify.xml(xpdl_top + xpdl + xpdl_end);
				xml = vkbeautify.xml(xml_top + xml + xml_end);
				$('input[name="xpdlcontent"]').val(xpdl);
				$('input[name="xmlcontent"]').val(xpdl);
				$('#containerForm').submit();
				
			});

			//控制属性显示
			$('.component-name').on('click', function() {
				if ($('.component-prop').is(':hidden')) {
					$('.full-right-bottom ').css({height: '26%'});
					$('.view').css({height: '68%'});
					$('.component-name .icon').removeClass('up').addClass('down');
					$('.component-prop').toggle('slow');
				} else {
					$('.full-right-bottom ').css({height: '8%'});
					$('.view').css({height: '86%'});
					$('.component-name .icon').removeClass('down').addClass('up');
					$('.component-prop').toggle();
				}
			});
		});
	    
	</script>

	<script>
		$(function() {
			var initProp = '<div>'+
								'<div name="id" class="prop-value"><span>id:</span><span>'+workflow_id+'</span></div>'+
								'<div name="name" class="prop-value"><span>名称:</span><span>'+workflow_name+'</span></div>'+
							'</div>'+
							'<div class="clearfix"></div>';
			$('.component-prop').append(initProp);
			$('.component-name span').text(workflow_name);
			$('.menu .item').tab();//标签显示必须放updateScrollbar之前

			$('.menu .item').on('click', updateScrollbar);
		});
		
		$(function() {
			// $('#rMenu').hide();
			$('#rMenu').on('mouseleave', function(){
				$('#rMenu').hide();
			});
			//semantic初始化
			$('.pop-btn').popup();
			//jquery插件滚动条
			$(".content-div, .postCondi_extendedAttr, .conditionList, .conditionList2").mCustomScrollbar();

			//活动属性semantic初始化
			$('.prop_node .menu .item').tab();
			$('.prop_node>.menu .item').on('click', function() {
				var item = $(this).attr('data-tab');
				$('.prop_node [data-tab="'+item+'"]').find('.content-div').mCustomScrollbar("update");
				if (item == 'four') {
					$('.post_condition .postCondi_extendedAttr').mCustomScrollbar("update");
					$('.prop_node.modal').css({
						height: '745px'
					});
					$('.prop_node>.tab').css({
						height: '608px'
					});
				} else {
					$('.prop_node.modal').css({
						height: '577px'
					});
					$('.prop_node>.tab').css({
						height: '447px'
					});
				}
			});

			//后置条件下的tab
			$('.targetActivity .menu .item').on('click', function() {//防止切换切换标签时滚动条消失
				var item = $(this).attr('data-tab');
				if (item == 'four/b') {
					$('.conditionDiv .conditionList').mCustomScrollbar("update");
				}
				if (item == 'four/a') {
					$('.targetActivity .postCondi_extendedAttr').mCustomScrollbar("update");
				}
			});

			$('select.dropdown').dropdown();

			$('.ui.checkbox').checkbox({
				onChecked: function() {
					$(this).parents('.checkbox').find('input[name]').val(true);
				},
				onUnchecked: function() {
					$(this).parents('.checkbox').find('input[name]').val(false);
				}
			});

			//checkbox 多人处理是否顺序执行 
			$('.checkbox.assignmentsOrderDiv').checkbox({
    			onChecked: function() {
    				$(this).parents('.checkbox').find('input[name]').val(true);
					$('.checkbox.completeAllAssignmentsDiv').checkbox('check');
				},
				onUnchecked: function() {
					$(this).parents('.checkbox').find('input[name]').val(false);
				}
			});

			//checkbox 是否多人处理
			$('.checkbox.completeAllAssignmentsDiv').checkbox({
    			onChecked: function() {
    				$(this).parents('.checkbox').find('input[name]').val(true);
				},
				onUnchecked: function() {
					$('.checkbox.assignmentsOrderDiv').checkbox('uncheck');
					$(this).parents('.checkbox').find('input[name]').val(false);
				}
			});

			$('.front_condition .radio.checkbox').checkbox({
				onChecked: function() {
					$('.front_condition').find('input[name="isCreateNew"]').val($(this).attr('tabindex'));
			    }
			});

			/* 活动属性-常规-定义 */
			$(document).on('click', '.conventional .definitionBtn', function() {
				$('.conventional_definition.modal').modal({
					allowMultiple: true,
					autofocus: false,
					duration: {},
					onHidden: function() {
	          			$('.modal.prop_node').dimmer('hide');
	          			clearModal(this);
	          			$(this).find('tbody').empty();
	          			$('.conventional_definition .menu .item[data-tab="definition_1"]').trigger('click');
	          		},
					onShow: function() {
	          			$('.modal.prop_node').dimmer({closable: false}).dimmer('show');
	          		}
				}).modal('show');
			});

			/* 活动属性-工具-添加 */
			$(document).on('click', '.modal.prop_node .toolAddBtn', function() {
				$('.tool_add.modal').modal({
					allowMultiple: true,
					autofocus: false,
					duration: {},
					onHidden: function() {
	          			$('.modal.prop_node').dimmer('hide');
	          			clearModal(this);
	          		},
					onShow: function() {
	          			$('.modal.prop_node').dimmer({closable: false}).dimmer('show');
	          		}
				}).modal('show');
			});

			/* 活动属性-工具-添加-扩展属性添加 */
			$(document).on('click', '.modal.tool_add .actualParametersAdd2', function() {
				$('.tool_extendAttr_add.modal').modal({
					allowMultiple: true,
					autofocus: false,
					duration: {},
					onHidden: function() {
	          			$('.modal.tool_add').dimmer('hide');
	          			clearModal(this);
	          		},
					onShow: function() {
	          			$('.modal.tool_add').dimmer({closable: false}).dimmer('show');
	          		}
				}).modal('show');
			});

			/* 活动属性-后置条件-扩展属性-添加 */
			$(document).on('click', '.post_condition .extendAttrAddBtn', function() {
				$('.postCondition_extendAttr_add.modal').modal({
					allowMultiple: true,
					autofocus: true,
					duration: {},
					onHidden: function() {
						$('.modal.prop_node').dimmer('hide');
	          			clearModal(this);
	          		},
					onShow: function() {
	          			$('.modal.prop_node').dimmer({closable: false}).dimmer('show');
	          			$('.postCondition_extendAttr_add .green.button').data('event_source', '.post_condition');
	          		}
				}).modal('show');
			});

			/* 连线属性-扩展属性-添加 */
			$(document).on('click', '.prop_edge .extendAttrAddBtn', function() {
				$('.postCondition_extendAttr_add.modal').modal({
					allowMultiple: true,
					autofocus: true,
					duration: {},
					onHidden: function() {
						$('.modal.prop_edge').dimmer('hide');
	          			clearModal(this);
	          		},
					onShow: function() {
	          			$('.modal.prop_edge').dimmer({closable: false}).dimmer('show');
	          			$('.postCondition_extendAttr_add .green.button').data('event_source', '.prop_edge');
	          		}
				}).modal('show');
			});

			/* 活动属性-后置条件-条件设置-关系设置 */
			$(document).on('click', '.relationshipPlaBtn', function() {
				var num = $('.workflowbeanDiv tbody tr').length;
				if (num) {
					$('.relationshipPlacement.modal').modal({
						allowMultiple: true,
						autofocus: false,
						duration: {},
						onHidden: function() {
							$('.modal.prop_node, .modal.prop_edge').dimmer('hide');
		          			clearModal(this);
		          		},
						onShow: function() {
		          			$('.modal.prop_node, .modal.prop_edge').dimmer({closable: false}).dimmer('show');
		          			$('.relationshipPlacement .condition_no').empty();
		          			for (var i = 0; i < num; i++) {
		          				$('.relationshipPlacement .condition_no').append(
		          					'<div class="inline field">'+
						    		'  	<div class="ui checkbox">'+
						    		'  	  	<input type="checkbox" tabindex="0" class="hidden">'+
						    		'  	  	<label>${'+(i+1)+'}</label>'+
						    		'  	  	<input type="hidden" name="${'+(i+1)+'}" value="">'+
						    		'  	</div>'+
						    		'</div>');
		          			}
		          			$('.relationshipPlacement .condition_no').find('.ui.checkbox').checkbox({
								onChecked: function() {
									$(this).parents('.checkbox').find('input[name]').val(true);
								},
								onUnchecked: function() {
									$(this).parents('.checkbox').find('input[name]').val(false);
								}
							});
		          		}
					}).modal('show');
				} else {
					layer.msg('请添加条件!', {time: 2000, icon:2});
				}
			});

			/* 活动属性-扩展属性-添加 */
			$(document).on('click', '.extended_attr .extendAttrAddBtn', function() {
				$('.extendAttr_add.modal').modal({
					allowMultiple: true,
					autofocus: true,
					duration: {},
					onHidden: function() {
	          			$('.modal.prop_node').dimmer('hide');
	          			clearModal(this);
	          		},
					onShow: function() {
	          			$('.modal.prop_node').dimmer({closable: false}).dimmer('show');
	          		}
				}).modal('show');
			});

			/* 超时限制-增加 */
			$(document).on('click', '.modal.prop_node .timeoutLimitAddBtn', function() {
				$('.timeoutLimit_add.modal').modal({
					allowMultiple: true,
					autofocus: false,
					duration: {},
					onHidden: function() {
	          			$('.modal.prop_node').dimmer('hide');
	          			clearModal(this);
	          		},
					onShow: function() {
	          			$('.modal.prop_node').dimmer({closable: false}).dimmer('show');
	          		}
				}).modal('show');
			});

			/* 监控信息-增加 */
			/*$('.monitorinf_add.modal').modal({
				allowMultiple: true,
				autofocus: false, 
				duration: {},
				onHidden: function() {
          			$('.modal.prop_node').dimmer('hide');
          			clearModal(this);
          		},
				onShow: function() {
          			$('.modal.prop_node').dimmer({closable: false}).dimmer('show');
          		}
			}).modal('attach events', '.modal.prop_node .monitorinfAddBtn');//attach events 在firefox下存在问题*/

			$(document).on('click', '.modal.prop_node .monitorinfAddBtn', function() {
				$('.monitorinf_add.modal').modal({
					allowMultiple: true,
					autofocus: false, 
					duration: {},
					onHidden: function() {
	          			$('.modal.prop_node').dimmer('hide');
	          			clearModal(this);
	          		},
					onShow: function() {
	          			$('.modal.prop_node').dimmer({closable: false}).dimmer('show');
	          		}
				}).modal('show');
			});

			/* 监控信息-增加-定义 */
			$(document).on('click', '.modal.monitorinf_add .definitionBtn', function() {
				$('.monitorinfAddDefinition.modal').modal({
					allowMultiple: true,
					autofocus: false,
					duration: {},
					onHidden: function(){
	          			$('.modal.monitorinf_add').dimmer('hide');
	          			clearModal(this);
	          			$(this).find('tbody').empty();
	          		},
					onShow: function() {
	          			$('.modal.monitorinf_add').dimmer({closable: false}).dimmer('show');
	          			$('.monitorinfAddDefinition select[name="definition_role"]').dropdown('set selected', 'responsible');
	          			$('.monitorinfAddDefinition select[name="conventional_definition_role"]').dropdown('set selected', 'responsible');
	          		}
				}).modal('show');
			});

			/* 工具-添加-定义 */
			$(document).on('click', '.modal.tool_add .definitionBtn', function() {
				$('.tooldefinition.modal').modal({
					allowMultiple: true,
					autofocus: false,
					duration: {},
					onHidden: function() {
	          			$('.modal.tool_add').dimmer('hide');
	          			clearModal(this);
	          		},
					onShow: function() {
	          			$('.modal.tool_add').dimmer({closable: false}).dimmer('show');
	          		}
				}).modal('show');
			});

			/* 工具-添加-定义-添加 */
			$(document).on('click', '.modal.tooldefinition .tooldefinitionAddBtn', function() {
				$('.tooldefinition_add.modal').modal({
					allowMultiple: true,
					autofocus: false,
					duration: {},
					onHidden: function() {
	          			$('.modal.tooldefinition').dimmer('hide');
	          			clearModal(this);
	          		},
					onShow: function() {
	          			$('.modal.tooldefinition').dimmer({closable: false}).dimmer('show');
	          		}
				}).modal('show');
			});

			/* 工具-添加-定义-添加-添加 */
			$(document).on('click', '.modal.tooldefinition_add .tooldefinitionAddAddBtn', function() {
				$('.tooldefinition_add_add.modal').modal({
					allowMultiple: true,
					autofocus: false,
					duration: {},
					onHidden: function() {
	          			$('.modal.tooldefinition_add').dimmer('hide');
	          			clearModal(this);
	          		},
					onShow: function() {
	          			$('.modal.tooldefinition_add').dimmer({closable: false}).dimmer('show');
	          		}
				}).modal('show');
			});

			/* 工具-添加-添加 */
			$(document).on('click', '.modal.tool_add .actualParametersAdd1', function() {
				$('.actualParametersDiv.modal').modal({
					allowMultiple: true,
					autofocus: false,
					duration: {},
					onHidden: function() {
	          			$('.modal.tool_add').dimmer('hide');
	          			clearModal(this);
	          		},
					onShow: function() {
	          			$('.modal.tool_add').dimmer({closable: false}).dimmer('show');
	          			//ajax请求角色数据
	          			
	          		}
				}).modal('show');
			});

			/* 工具-添加-添加-定义 */
			$(document).on('click', '.modal.actualParametersDiv .definitionBtn', function() {
				$('.toolAddDefinition.modal').modal({
					allowMultiple: true,
					autofocus: false,
					duration: {},
					onHidden: function() {
	          			$('.modal.actualParametersDiv').dimmer('hide');
	          			clearModal(this);
	          		},
					onShow: function() {
	          			$('.modal.actualParametersDiv').dimmer({closable: false}).dimmer('show');
	          		}
				}).modal('show');
			});

			/* 工具-添加-添加-定义-添加 */
			$(document).on('click', '.modal.toolAddDefinition .toolAddDefinitionAddBtn', function() {
				$('.toolAddDefinitionAdd.modal').modal({
					allowMultiple: true,
					autofocus: false,
					duration: {},
					onHidden: function() {
	          			$('.modal.toolAddDefinition').dimmer('hide');
	          			clearModal(this);
	          		},
					onShow: function() {
	          			$('.modal.toolAddDefinition').dimmer({closable: false}).dimmer('show');
	          		}
				}).modal('show');
			});

			//常规-定义-高级-一般 类型onChange事件
			$('.def_common [data-tab$="/a"] select[name=definition_type]').on('change', function() {
				$(this).parents('[data-tab$="/a"]').find('input').val('');
			});

    		//点击显示树形结构div
			$('input[name="def_name_show"]').on('click', function() {
				var def_type = $(this).parents('.modal').find('.tab[data-tab$="/a"] select[name=definition_type]').val();
				if (!def_type) {
					layer.msg('先选择类型！', {time: 2000, icon:0, offset: '180px'});
					return;
				}
				if (def_type.indexOf('role') != -1) {//类型-角色
					$('.role_manage.modal').modal({
						allowMultiple: true,
						autofocus: false,
						duration: {},
						onHidden: function() {
		          			$('.modal.conventional_definition,.modal.monitorinfAddDefinition').dimmer('hide');
		          			clearModal(this);
		          		},
						onShow: function() {
		          			$('.modal.conventional_definition,.modal.monitorinfAddDefinition').dimmer({closable: false}).dimmer('show');
		          			selectInfo(1, 15);
		          		}
					}).modal('show');
					return;
				}
				//根据类型 定义url
				var url = '';
				if (def_type == 'human|人') {
					url = 'platform/person/userTree.do?state=';
				} else if (def_type.indexOf('org') != -1) {
					url = 'platform/organise/organiseTree.do?state=';
				} else if (def_type == 'allParty|所有人【人】') {
					layer.msg('不需要填写！', {time: 2000, icon:4});
					return;
				}

				var setting = {
					view: {
						dblClickExpand: false
					},
					check: {
						enable: true,
						chkStyle: "radio",
						radioType: "all"
					},
					callback: {
						onClick: OnClick,
						onAsyncSuccess: onsuccess 
					},
					async: {  
						autoParam: ["id=node", "value=parentId"], 
						otherParam: {}, 
						contentType: "application/x-www-form-urlencoded;charset=UTF-8",  
						enable: true,  
						type: "post",  
						url: url,
						dataFilter: ajaxDataFilter
					},
					data:{  
						simpleData: {
							enable: true,
							rootPId: "xnode-40"
						} 
					} 
				};

				treelayer = layer.open({
				  	type: 1,
				  	title: 'PersonTree',
				  	skin: 'layui-layer-rim', //边框
				  	area: ['300px', '350px'], //宽高
				  	offset: ['167px', '587px'],
				  	content: '<div id="treeDemo_div" style="height:98%">'+
				  				'<ul id="treeDemo" class="ztree">'+
				  				'</ul>'+
				  				'<div class="buttons_bottom">'+
					  				'<div class="ui horizontal divider">'+
					  					'<button class="ui primary mini button">确定</button>'+
										'<button class="ui cancel mini button">取消</button>'+
									'</div>'+
								'</div>'+
							 '</div>'
				});
				/* ztree */
				$.fn.zTree.init($("#treeDemo"), setting);
				zTree = $.fn.zTree.getZTreeObj("treeDemo");
			});
			//树形结构下 取消
			$(document).on('click', '#treeDemo_div .cancel', function() {
				layer.close(treelayer);
			});
			//树形结构下 确定
			$(document).on('click', '#treeDemo_div .primary', function() {
				var nodes = zTree.getCheckedNodes(true);
				if (nodes.length) {
					if ($('.conventional_definition').is(':visible')) {
						$('.conventional_definition input[name=def_name_show]').val(nodes[0].name);
						$('.conventional_definition input[name=definition_name]').val(nodes[0].value + '|' + nodes[0].name);
					} else {
						$('.monitorinfAddDefinition input[name=def_name_show]').val(nodes[0].name);
						$('.monitorinfAddDefinition input[name=definition_name]').val(nodes[0].value + '|' + nodes[0].name);
					}
				} else {
					layer.msg('请选中元素！', {time: 2000, icon: 0, offset: ['270px','650px']});
					return;
				}
				layer.close(treelayer);
			});
			//角色管理-搜索
			$('.role_manage .search.icon').on('click', function() {
				selectInfo(1, 15);
			});
			//角色管理-重置
			$('.role_manage .resetBtn').on('click', function() {
				$(this).siblings('.role-search').find('input').val('');
				$('.role_manage .search.icon').trigger('click');
			});
			//角色管理-确定
			$('.role_manage .okBtn').on('click', function() {
				var jsonstr = $(this).parents('#role-center').find('tr.active').attr('jsonstr');
				if (jsonstr) {
					var jsonobj = JSON.parse(jsonstr);
					if ($('.conventional_definition').is(':visible')) {
						$('.conventional_definition input[name=def_name_show]').val(jsonobj.ROLENAME);
						$('.conventional_definition input[name=definition_name]').val(jsonobj.ROLEID + '|' + jsonobj.ROLENAME);
					} else {
						$('.monitorinfAddDefinition input[name=def_name_show]').val(jsonobj.ROLENAME);
						$('.monitorinfAddDefinition input[name=definition_name]').val(jsonobj.ROLEID + '|' + jsonobj.ROLENAME);
					}
					$(this).parents('.modal').modal('hide');
				} else {
					layer.msg('请选中元素！', {time: 2000, icon: 0, offset: '180px'});
					return;
				}
			});

			//工具栏-帮助
			$('#helper').on('click', function() {
				layer.open({
					type: 1,
					shade: false,
					title: false, //不显示标题
					offset: ['91px', '394px'],
					content: '<ul class="layer_notice" style="display: block;">'+
							 '  <li><a href="javascript:;">1. 将左侧活动拖至编辑区</a></li>'+
							 '  <li><a href="javascript:;">2. 选中"转移"或"自转移"，编辑区活动之间连线</a></li>'+
							 '  <li><a href="javascript:;">3. 右击活动和线都有自己的属性 </a></li>'+
							 '</ul>', //捕获的元素，注意：最好该指定的元素要存放在body最外层，否则可能被其它的相对元素所影响
					cancel: function() {
						// console.log('helper closed!');
					}
				});
			});
		});

		//清空表单
		function clearModal(selector) {
			$(selector).find('input, textarea').val('');
    		$(selector).find('.ui.dropdown').dropdown('clear');
		}

		//刷新显示滚动条
		function updateScrollbar() {
			var dataTab = $(this).attr('data-tab');
			if (dataTab == 'third') { //xml视图
				$("#xmlContainer").mCustomScrollbar("update");
			}
			if (dataTab == 'second') { //xpdl视图
				$("#xpdlContainer").mCustomScrollbar("update");
			}
		}
		//zTree 数据过滤
		function ajaxDataFilter(treeId, parentNode, responseData) {
		    if (responseData) {
		      for(var i =0; i < responseData.length; i++) {
		        responseData[i].name = responseData[i].text;
		        responseData[i].open = responseData[i].expanded;
		        responseData[i].isParent = !responseData[i].leaf;
		        responseData[i].nocheck = responseData[i].checked == false ? false : true;
		      }
		    }
		    return responseData;
		}
		//zTree 点击节点
		function OnClick(event, treeId, treeNode) {
			zTree.checkNode(treeNode, true, false);
			
		}
		//zTree onsuccess
		function onsuccess(event, treeId, treeNode, msg) {
			var dataJson = JSON.parse(msg);
			if (!dataJson.length) return;
			if(dataJson[0].id == 'root-root' && dataJson[0].expanded){
				var node = zTree.getNodeByParam("id", dataJson[0].id);
				zTree.expandNode(node, true);
			}
		}
		function selectInfo(offset, size){
			if (offset) {
		 		$(".role_manage #offset").val(offset);
		 	}
		 	if (size) {
		 		$(".role_manage #size").val(size);
		 	}
		 	$("#searchForm").trimForm().ajaxSubmit({
	            url: "platform/role/query.do?hyper=false",
		 		type: "post",
		 		data: {
		 			"start": (offset-1)*size,
		        	"limit": size //后台用的默认参数15，传值无效
		        },
		        dataType: "json",
	            success: function(result) {
	            	$('.role_manage .content-tab').empty();
	                if (result.totalCount) {
	                    $.pages({
	                        count: result.totalCount, //总数量
	                        curr: offset, //初始化当前页
	                    }, selectInfo, size);
	                    //显示数据
						$('.role_manage .content-tab').html(juicer($('#role_manage_tpl').html(), result));
						$('.role_manage .content-tab').find('.ui.checkbox').checkbox();
	                } else {
						$('.role_manage .content-tab').html('<div class="no-info">暂无信息...</div>');
					}
	            },
				error: function(data) {
					alert("服务器繁忙,请稍后再试...");
				}
	        });
		}
	</script>
</body>
</html>
